{"version":3,"sources":["webpack:///src/pages/store/search.vue","webpack:///./src/pages/store/search.vue?773d","webpack:///./src/pages/store/search.vue"],"names":["search","data","showPreLoading","records","page","psize","loading","finished","empty","cart","num","store","hotGoods","keyword","searchHistory","activetabs","showMoveDot","components","PublicHeader","header","GoodsHandle","goodsHandle","StoreCart","storeCart","methods","extends_default","Object","vuex_esm","onSearch","force","that","this","indexOf","push","util","setStorage","sid","funcCommon","vue","recordsName","url","is_search","success","res","replaceStore","replaceCart","message","$toast","onLoad","getStorage","istore","id","onDetail","goodsid","$router","getUrl","path","query","onDelHistory","_this","$dialog","confirm","then","removeStorage","computed","created","$route","mounted","store_search","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","name","directives","rawName","value","expression","type","placeholder","domProps","on","input","$event","target","composing","click","length","_m","_l","item","index","key","_s","_e","offset","immediate-check","load","model","callback","$$v","$set","goodsItem","src","thumb","alt","tag","sailed","comment_good","price","unitname_cn","discount","max_buy_limit","goods","optionId","from","show","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/147.6376cc442de55d54dcad.js","sourcesContent":["<template>\r\n\t<div id=\"goods-search\">\r\n\t\t<public-header title=\"商品搜索\"></public-header>\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class='search-header van-hairline--bottom'>\r\n\t\t\t\t<div class=\"search-content\">\r\n\t\t\t\t\t<van-icon name=\"search\"/>\r\n\t\t\t\t\t<input v-model=\"keyword\" type=\"text\" class=\"search-input\" placeholder=\"请输入商品名称\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"search-btn\" @click=\"onSearch(true)\">搜索</div>\r\n\t\t\t</div>\r\n\t\t\t<template v-if=\"records.page == 1\">\r\n\t\t\t\t<div class='rmd-history' v-if=\"hotGoods && hotGoods.length > 0\">\r\n\t\t\t\t\t<div class='search-rmd-wrap'>\r\n\t\t\t\t\t\t<div class='search-rmd-title '>\r\n\t\t\t\t\t\t\t<div class=\"van-hairline--bottom\">热门搜索</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='search-rmd'>\r\n\t\t\t\t\t\t\t<div v-for=\"(item, index) in hotGoods\" @click=\"onSearch(true, item.title)\" :key=\"'hot' + index\">{{item.title}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class='rmd-history' v-if=\"searchHistory && searchHistory.length > 0\">\r\n\t\t\t\t\t<div class='search-rmd-wrap'>\r\n\t\t\t\t\t\t<div class='search-rmd-title'>\r\n\t\t\t\t\t\t\t<div class=\"van-hairline--bottom\">搜索历史</div>\r\n\t\t\t\t\t\t\t<div class='icon icon-delete' @click=\"onDelHistory\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='search-rmd'>\r\n\t\t\t\t\t\t\t<div v-for=\"(item, index) in searchHistory\" @click=\"onSearch(true, item)\" :key=\"'h' + index\">{{item}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t\t<div class=\"goods-search-warp\">\r\n\t\t\t\t<van-list\r\n\t\t\t\t\tv-model=\"records.loading\"\r\n\t\t\t\t\t:finished=\"records.finished\"\r\n\t\t\t\t\t@load=\"onSearch(false)\"\r\n\t\t\t\t\t:offset=\"100\"\r\n\t\t\t\t\t:immediate-check=\"false\"\r\n\t\t\t\t\tv-if=\"!records.empty\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"goods-list\">\r\n\t\t\t\t\t\t<div class=\"goods-item van-hairline--bottom flex\" v-for=\"goodsItem in records.data\" :key=\"goodsItem.id\">\r\n\t\t\t\t\t\t\t<div class=\"goods-thumb\" @click=\"onDetail(goodsItem.id)\">\r\n\t\t\t\t\t\t\t\t<img class=\"img-100\" :src=\"goodsItem.thumb\" alt=\"\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div tag=\"div\" class=\"goods-info\">\t\r\n\t\t\t\t\t\t\t\t<div class=\"w-100 ellipsis font-14 font-500\" @click=\"onDetail(goodsItem.id)\">{{goodsItem.title}}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"c-gray flex font-12\" @click=\"onDetail(goodsItem.id)\">\r\n\t\t\t\t\t\t\t\t\t<span>已售{{goodsItem.sailed}}</span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"margin-15-l\">赞{{goodsItem.comment_good}}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"font-500 c-danger font-14 flex\" @click=\"onDetail(goodsItem.id)\">\r\n\t\t\t\t\t\t\t\t\t<span>¥{{goodsItem.price}}{{goodsItem.unitname_cn}}</span>\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex margin-10-l\" v-if=\"goodsItem.discount\">\r\n\t\t\t\t\t\t\t\t\t\t<van-icon name='tag'></van-icon>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"font-12\">{{goodsItem.discount}}折 限{{goodsItem.max_buy_limit}}份</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"goods-operation\">\r\n\t\t\t\t\t\t\t\t\t<goods-handle\r\n\t\t\t\t\t\t\t\t\t\t:goods=\"goodsItem\"\r\n\t\t\t\t\t\t\t\t\t\t:optionId=\"0\"\r\n\t\t\t\t\t\t\t\t\t\tfrom=\"detail\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</goods-handle>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</van-list>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"no-data\" v-if=\"records.empty\">\r\n\t\t\t\t<img src=\"static/img/order_no_con.png\" alt=\"\">\r\n\t\t\t\t<p>暂无相关商品，敬请期待</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- 购物车部分 -->\r\n\t\t<store-cart\r\n\t\t\t:show=\"!records.empty && records.page > 1\"\r\n\t\t\t:store=\"store\"\r\n\t\t\t:cart=\"cart\">\r\n\t\t</store-cart>\r\n\t\t<iloading v-if=\"showPreLoading\"></iloading>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport PublicHeader from '@/components/header'\r\n\timport GoodsHandle from '@/components/goodsHandle'\r\n\timport StoreCart from '@/components/storeCart'\r\n\timport {getData, getRecords} from \"@/controller/funcCommon\"\r\n\timport {mapState, mapMutations} from 'vuex'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowPreLoading: true,\r\n\t\t\t\trecords: {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tpsize: 10,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tfinished: false,\r\n\t\t\t\t\tempty: false,\r\n\t\t\t\t\tdata:[]\r\n\t\t\t\t},\r\n\t\t\t\tcart: {\r\n\t\t\t\t\tnum: 0,\r\n\t\t\t\t},\r\n\t\t\t\tstore: {},\r\n\t\t\t\thotGoods: [],\r\n\t\t\t\tkeyword: '',\r\n\t\t\t\tsearchHistory: [],\r\n\t\t\t\tactivetabs: 0,\r\n\t\t\t\tshowMoveDot: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tPublicHeader,\r\n\t\t\tGoodsHandle,\r\n\t\t\tStoreCart\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'replaceStore', 'replaceCart'\r\n\t\t\t]),\r\n\t\t\tonSearch(force, keyword) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.records.loading = true;\r\n\t\t\t\tif(!keyword) {\r\n\t\t\t\t\tif(that.keyword) {\r\n\t\t\t\t\t\tvar is_exist = that.searchHistory.indexOf(that.keyword);\r\n\t\t\t\t\t\tif(is_exist == -1) {\r\n\t\t\t\t\t\t\tthat.searchHistory.push(that.keyword);\r\n\t\t\t\t\t\t\tthat.util.setStorage('isearchHistory.goods.' + that.sid, that.searchHistory);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.keyword = keyword;\r\n\t\t\t\t}\r\n\t\t\t\tif(!that.keyword) {\r\n\t\t\t\t\tthat.util.$toast('请输入商品名称', '', 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tgetRecords({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\tforce: force,\r\n\t\t\t\t\trecordsName: 'goods',\r\n\t\t\t\t\turl: 'wmall/store/goods/search',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsid: that.sid,\r\n\t\t\t\t\t\tis_search: 1,\r\n\t\t\t\t\t\tkeyword: that.keyword\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif(!that.records.empty) {\r\n\t\t\t\t\t\t\tthat.store = res.store;\r\n\t\t\t\t\t\t\tthat.cart = res.cart;\r\n\t\t\t\t\t\t\tthat.replaceStore(res.store);\r\n\t\t\t\t\t\t\tthat.replaceCart(res.cart.message.cart);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonLoad() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.searchHistory = that.util.getStorage('isearchHistory.goods.' + that.istore.id);\r\n\t\t\t\tif(!that.searchHistory) {\r\n\t\t\t\t\tthat.searchHistory = [];\r\n\t\t\t\t}\r\n\t\t\t\tgetData({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\turl: 'wmall/store/goods/search',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsid: that.sid,\r\n\t\t\t\t\t\tis_search: 0\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.hotGoods = res.hotGoods;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonDetail(goodsid) {\r\n\t\t\t\tthis.$router.push(this.util.getUrl({path: 'pages/store/goodsDetail', query: {id: goodsid, sid: this.store.id}}));\r\n\t\t\t},\r\n\t\t\tonDelHistory() {\r\n\t\t\t\tthis.$dialog.confirm({\r\n\t\t\t\t\tmessage: '确定清除历史记录吗'\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tif (res == 'confirm') {\r\n\t\t\t\t\t\tthis.util.removeStorage('isearchHistory.goods.' + this.sid);\r\n\t\t\t\t\t\tthis.searchHistory = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\r\n\t\t\t\t'istore', 'icart'\r\n\t\t\t]),\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif(this.$route.query) {\r\n\t\t\t\tthis.sid = this.$route.query.sid;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.onLoad();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#goods-search .content{\r\n\t\tbottom: 50px;\r\n\t}\r\n\t#goods-search .search-header{\r\n\t\tbackground-color: #fff;\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding:10px;\r\n\t\tdisplay:flex;\r\n\t\tflex-flow: row nowrap;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t#goods-search .search-header .search-content{\r\n\t\twidth: 90%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 40px;\r\n\t\tposition: relative;\r\n\t}\r\n\t#goods-search .search-header .search-content .van-icon{\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\twidth: 30px;\r\n\t\tline-height: 28px;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t#goods-search .search-header .search-content .search-input{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tline-height: 28px;\r\n\t\tborder-radius: 40px;\r\n\t\tpadding-left: 25px;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: #f2f2f2;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t#goods-search .search-header .search-btn{\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #FF2D4B;\r\n\t}\r\n\t#goods-search .rmd-history{\r\n\t\tmargin-bottom: 10px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t#goods-search .rmd-history .search-rmd-title{\r\n\t\tposition: relative;\r\n\t\tpadding-left: 15px;\r\n\t\tfont-size: 15px;\r\n\t\tline-height: 38px;\r\n\t\tcolor: #656565;\r\n\t\tbackground: #fff;\r\n\t}\r\n\t#goods-search .rmd-history .search-rmd-title .icon{\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 15px;\r\n\t}\r\n\t#goods-search .rmd-history .search-rmd{\r\n\t\tpadding: 10px;\r\n\t\tbackground: #fff;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t#goods-search .rmd-history .search-rmd div{\r\n\t\tdisplay: inline-block;\r\n\t\tfloat: left;\r\n\t\tmax-width: 187px;\r\n\t\tmin-width: 58px;\r\n\t\theight: 31px;\r\n\t\tline-height: 31px;\r\n\t\tmargin: 5px;\r\n\t\tpadding: 0 16px;\r\n\t\t-webkit-box-sizing: border-box;\r\n\t\t-mox-box-sizing: border-box;\r\n\t\tbox-sizing: border-box;\r\n\t\t-webkit-border-radius: 2px;\r\n\t\t-moz-border-radius: 2px;\r\n\t\tborder-radius: 2px;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tcolor: #2f2f2f;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t\ttext-overflow: ellipsis;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\t#goods-search .goods-search-warp{\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t#goods-search .goods-search-warp .goods-list .goods-item{\r\n\t\tposition: relative;\r\n\t\tpadding: 10px 15px;\r\n\t}\r\n\t#goods-search .goods-item .goods-thumb{\r\n\t\twidth: 56px;\r\n\t\theight: 56px;\r\n\t\tfont-size: 0px;\r\n\t\tborder-radius: 3px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t#goods-search .goods-item .goods-info{\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column nowrap;\r\n\t\talign-items: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t\tposition: absolute;\r\n\t\ttop: 10px;\r\n\t\tleft: 81px;\r\n\t\tright: 15px;\r\n\t\tbottom: 10px;\r\n\t}\r\n\t#goods-search .goods-item .goods-operation{\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\tmin-width: 100px;\r\n\t}\r\n\t#goods-search .goods-item .goods-operation .foodop{\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n\t#goods-search .goods-item .discount{\r\n\t\tposition:relative;\r\n\t\tbackground: linear-gradient(to right, rgba(253,111,99,1) , rgba(253,111,99,0.5));\r\n\t\tcolor:#fff!important;\r\n\t\tpadding-left:10px;\r\n\t\tfont-size: 12px;\r\n\t\theight: 12px;\r\n\t\twidth: 100px;\r\n\t\tline-height: 12px;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/store/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"goods-search\"}},[_c('public-header',{attrs:{\"title\":\"商品搜索\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"search-header van-hairline--bottom\"},[_c('div',{staticClass:\"search-content\"},[_c('van-icon',{attrs:{\"name\":\"search\"}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keyword),expression:\"keyword\"}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入商品名称\"},domProps:{\"value\":(_vm.keyword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.keyword=$event.target.value}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"search-btn\",on:{\"click\":function($event){_vm.onSearch(true)}}},[_vm._v(\"搜索\")])]),_vm._v(\" \"),(_vm.records.page == 1)?[(_vm.hotGoods && _vm.hotGoods.length > 0)?_c('div',{staticClass:\"rmd-history\"},[_c('div',{staticClass:\"search-rmd-wrap\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"search-rmd\"},_vm._l((_vm.hotGoods),function(item,index){return _c('div',{key:'hot' + index,on:{\"click\":function($event){_vm.onSearch(true, item.title)}}},[_vm._v(_vm._s(item.title))])}))])]):_vm._e(),_vm._v(\" \"),(_vm.searchHistory && _vm.searchHistory.length > 0)?_c('div',{staticClass:\"rmd-history\"},[_c('div',{staticClass:\"search-rmd-wrap\"},[_c('div',{staticClass:\"search-rmd-title\"},[_c('div',{staticClass:\"van-hairline--bottom\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('div',{staticClass:\"icon icon-delete\",on:{\"click\":_vm.onDelHistory}})]),_vm._v(\" \"),_c('div',{staticClass:\"search-rmd\"},_vm._l((_vm.searchHistory),function(item,index){return _c('div',{key:'h' + index,on:{\"click\":function($event){_vm.onSearch(true, item)}}},[_vm._v(_vm._s(item))])}))])]):_vm._e()]:_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"goods-search-warp\"},[(!_vm.records.empty)?_c('van-list',{attrs:{\"finished\":_vm.records.finished,\"offset\":100,\"immediate-check\":false},on:{\"load\":function($event){_vm.onSearch(false)}},model:{value:(_vm.records.loading),callback:function ($$v) {_vm.$set(_vm.records, \"loading\", $$v)},expression:\"records.loading\"}},[_c('div',{staticClass:\"goods-list\"},_vm._l((_vm.records.data),function(goodsItem){return _c('div',{key:goodsItem.id,staticClass:\"goods-item van-hairline--bottom flex\"},[_c('div',{staticClass:\"goods-thumb\",on:{\"click\":function($event){_vm.onDetail(goodsItem.id)}}},[_c('img',{staticClass:\"img-100\",attrs:{\"src\":goodsItem.thumb,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"goods-info\",attrs:{\"tag\":\"div\"}},[_c('div',{staticClass:\"w-100 ellipsis font-14 font-500\",on:{\"click\":function($event){_vm.onDetail(goodsItem.id)}}},[_vm._v(_vm._s(goodsItem.title))]),_vm._v(\" \"),_c('div',{staticClass:\"c-gray flex font-12\",on:{\"click\":function($event){_vm.onDetail(goodsItem.id)}}},[_c('span',[_vm._v(\"已售\"+_vm._s(goodsItem.sailed))]),_vm._v(\" \"),_c('span',{staticClass:\"margin-15-l\"},[_vm._v(\"赞\"+_vm._s(goodsItem.comment_good))])]),_vm._v(\" \"),_c('div',{staticClass:\"font-500 c-danger font-14 flex\",on:{\"click\":function($event){_vm.onDetail(goodsItem.id)}}},[_c('span',[_vm._v(\"¥\"+_vm._s(goodsItem.price)+_vm._s(goodsItem.unitname_cn))]),_vm._v(\" \"),(goodsItem.discount)?_c('div',{staticClass:\"flex margin-10-l\"},[_c('van-icon',{attrs:{\"name\":\"tag\"}}),_vm._v(\" \"),_c('span',{staticClass:\"font-12\"},[_vm._v(_vm._s(goodsItem.discount)+\"折 限\"+_vm._s(goodsItem.max_buy_limit)+\"份\")])],1):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"goods-operation\"},[_c('goods-handle',{attrs:{\"goods\":goodsItem,\"optionId\":0,\"from\":\"detail\"}})],1)])])}))]):_vm._e()],1),_vm._v(\" \"),(_vm.records.empty)?_c('div',{staticClass:\"no-data\"},[_c('img',{attrs:{\"src\":\"static/img/order_no_con.png\",\"alt\":\"\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"暂无相关商品，敬请期待\")])]):_vm._e()],2),_vm._v(\" \"),_c('store-cart',{attrs:{\"show\":!_vm.records.empty && _vm.records.page > 1,\"store\":_vm.store,\"cart\":_vm.cart}}),_vm._v(\" \"),(_vm.showPreLoading)?_c('iloading'):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-rmd-title \"},[_c('div',{staticClass:\"van-hairline--bottom\"},[_vm._v(\"热门搜索\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-15e23463\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/store/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15e23463\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15e23463\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/store/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}