webpackJsonp([41],{FaI8:function(t,s){},ghR1:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Gu7T"),e=i.n(a),o=i("NPH5"),d={components:{PublicHeader:i("Cz8s").a,Load:o.a},data:function(){return{showPreLoading:!0,cid:0,sid:0,slides:[],goods_category:[],goods:{page:1,psize:15,loading:!1,loaded:!1,empty:!1,data:[]}}},methods:{onLoad:function(){var t=this;this.util.request({url:"seckill/seckill"}).then(function(s){t.showPreLoading=!1;var i=s.data.message;i.errno?t.$toast(i.message):(t.goods_category=i.message.categorys,t.slides=i.message.slides,t.onGetGoods())})},onGetGoods:function(){var t=this;if(this.goods.loaded)return!1;this.util.request({url:"seckill/seckill/goods",data:{cid:this.cid,sid:this.sid,page:this.goods.page,psize:this.goods.psize}}).then(function(s){var i=s.data.message;i.errno?t.$toast(i.message):(t.goods.page++,t.goods.data=[].concat(e()(t.goods.data),e()(i.message.goods)),t.goods.data.length||(t.goods.empty=!0),i.message.goods.length<t.goods.psize&&(t.goods.loaded=!0),t.goods.loading=!1)})},getCidGoods:function(t){if(t==this.cid)return!1;this.cid=t,this.goods={page:1,psize:15,loading:!0,loaded:!1,empty:!1,data:[]},this.onGetGoods()}},created:function(){this.$route.query.sid&&(this.sid=this.$route.query.sid)},mounted:function(){this.onLoad()}},l={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"seckill-index"}},[i("public-header",{attrs:{title:"限时抢购"}}),t._v(" "),i("div",{staticClass:"content"},[t.slides.length>0?i("van-swipe",{attrs:{autoplay:3e3}},t._l(t.slides,function(s,a){return i("van-swipe-item",{key:a},[i("div",{on:{click:function(i){t.util.jsUrl(s.link)}}},[i("img",{attrs:{src:s.thumb,alt:""}})])])})):t._e(),t._v(" "),i("div",{staticClass:"store"},[i("div",{staticClass:"store-tabs"},[i("div",{staticClass:"tab-item",class:{active:0==t.cid},on:{click:function(s){t.getCidGoods(0)}}},[t._v("全部")]),t._v(" "),t._l(t.goods_category,function(s,a){return i("div",{key:a,staticClass:"tab-item",class:{active:t.cid==s.id},on:{click:function(i){t.getCidGoods(s.id)}}},[t._v(t._s(s.title))])})],2)]),t._v(" "),t.goods.empty?i("load",{attrs:{type:"loaded",text:"暂无符合条件的商品"}}):i("van-list",{attrs:{finished:t.goods.loaded,offset:100,"immediate-check":!1},on:{load:t.onGetGoods},model:{value:t.goods.loading,callback:function(s){t.$set(t.goods,"loading",s)},expression:"goods.loading"}},[i("div",{staticClass:"list"},t._l(t.goods.data,function(s,a){return i("div",{staticClass:"list-item",class:{"van-hairline--bottom":a<t.goods.data.length-1}},[i("div",{staticClass:"img-container"},[i("img",{staticClass:"item-logo",attrs:{src:s.thumb,alt:""}}),t._v(" "),i("img",{staticClass:"item-sign",attrs:{src:"static/img/qiang.png",alt:""}})]),t._v(" "),i("div",{staticClass:"item-info"},[i("div",{staticClass:"top"},[i("div",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),i("div",{staticClass:"store-title"},[i("van-icon",{attrs:{name:"shop"}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(s.store_title)+"\n\t\t\t\t\t\t\t")],1),t._v(" "),i("div",{staticClass:"stock"},[t._v("仅剩"+t._s(s.total)+"份")])]),t._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"left"},[i("div",{staticClass:"price"},[t._v("￥"),i("span",[t._v(t._s(s.price))])]),t._v(" "),i("div",{staticClass:"old-price"},[t._v("¥"+t._s(s.old_price))])]),t._v(" "),i("div",{staticClass:"right"},[i("router-link",{staticClass:"seckill-go",attrs:{to:t.util.getUrl({path:"/pages/seckill/detail",query:{id:s.id}})}},[t._v("去抢购")]),t._v(" "),i("div",{staticClass:"progress"},[t._v("\n\t\t\t\t\t\t\t\t\t已售"+t._s(s.sailed_percent)+"%\n\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress-bar-inner",style:{width:s.sailed_percent+"%"}})])])],1)])])])})),t._v(" "),t.goods.loaded?i("div",{staticClass:"loaded"},[i("div",{staticClass:"loaded-tips"},[t._v("我是有底线的")])]):t._e()])],1),t._v(" "),i("transition",{attrs:{name:"loading"}},[t.showPreLoading?i("iloading"):t._e()],1)],1)},staticRenderFns:[]};var n=i("VU/8")(d,l,!1,function(t){i("FaI8")},null,null);s.default=n.exports}});
//# sourceMappingURL=41.9a39cf5288113ad105ca.js.map