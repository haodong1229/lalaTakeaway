webpackJsonp([32],{dUvA:function(e,t){},x5N1:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Gu7T"),i=o.n(n),r=o("Cz8s"),a=o("deIj"),s={data:function(){return{id:0,order:{},order_note:[],type:"",picknum:!1,columns:["1人","2人","3人","4人","5人"],islegal:!1,showPreLoading:!0}},components:{PublicHeader:r.a},methods:{onLoad:function(){var e=this;Object(a.a)({vue:e,url:"wmall/order/index/order_info_update",data:{id:e.id},success:function(t){e.order=t.order,e.order_note=[].concat(i()(e.order_note),i()(t.store.order_note)),e.islegal=!0}})},onChangePicknum:function(){this.picknum=!this.picknum},onConfirmPersonNum:function(e,t){var o=t+1;this.order.person_num=o,this.onChangePicknum()},onChooseLabel:function(e){this.order.note=this.order.note+" "+e},onSubmit:function(){var e=this;if(e.islegal){if("note"==e.type)var t={id:e.id,note:e.order.note,type:e.type};else if("mobile"==e.type){if(!e.order.mobile)return e.$toast("请输入手机号"),!1;if(!e.util.isValidMobile(e.order.mobile))return e.$toast("手机号格式错误"),!1;t={id:e.id,mobile:e.order.mobile,type:e.type}}else if("person_num"==e.type)t={id:e.id,person_num:e.order.person_num,type:e.type};e.islegal=!1,Object(a.c)({vue:e,url:"wmall/order/index/order_info_update",data:t,success:function(t){e.util.$toast(t,e.util.getUrl({path:"/pages/order/op",query:{id:e.id}}),1500,"replace")},fail:function(t){e.util.$toast(t),e.islegal=!0}})}}},mounted:function(){this.onLoad()},created:function(){this.query=this.$route.query,this.query&&this.query.type&&this.query.id&&(this.id=this.query.id,this.type=this.query.type)}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"order-opUpdate"}},[o("public-header",{attrs:{title:"修改订单信息"}}),e._v(" "),o("div",{staticClass:"content"},["note"==e.type?o("van-cell-group",{staticClass:"text"},[o("van-field",{attrs:{type:"textarea",placeholder:"请输入备注，最多50字哦"},model:{value:e.order.note,callback:function(t){e.$set(e.order,"note",t)},expression:"order.note"}}),e._v(" "),e.order_note&&e.order_note.length>0?o("div",{staticClass:"label-box"},e._l(e.order_note,function(t){return o("div",{staticClass:"label",on:{click:function(o){return e.onChooseLabel(t)}}},[e._v(e._s(t))])}),0):e._e()],1):e._e(),e._v(" "),"person_num"==e.type?o("van-cell-group",{staticClass:"margin-15-t",on:{click:e.onChangePicknum}},[o("van-cell",{attrs:{to:"",title:"餐具数量"}},[o("div",{staticClass:"flex c-gray",attrs:{slot:"right-icon"},slot:"right-icon"},[e.order.person_num?o("span",[e._v(e._s(e.order.person_num)+"套")]):o("span",[e._v("未选择")]),e._v(" "),o("van-icon",{staticClass:"margin-5-l",attrs:{name:"arrow"}})],1)])],1):e._e(),e._v(" "),"mobile"==e.type?o("van-cell-group",{staticClass:"margin-15-t"},[o("van-field",{attrs:{type:"number",placeholder:"请输入收货电话",label:"收货电话","input-align":"right"},model:{value:e.order.mobile,callback:function(t){e.$set(e.order,"mobile",t)},expression:"order.mobile"}})],1):e._e(),e._v(" "),o("div",{staticClass:"padding-15"},[o("van-button",{staticClass:"bg-danger",attrs:{size:"normal",block:"",disabled:!e.islegal},on:{click:e.onSubmit}},[e._v("保存")])],1)],1),e._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:e.picknum,callback:function(t){e.picknum=t},expression:"picknum"}},[o("div",{staticClass:"popup-picknum"},[o("van-picker",{attrs:{columns:e.columns,"show-toolbar":"","confirm-button-text":"确认","cancel-button-text":"取消"},on:{confirm:e.onConfirmPersonNum,cancel:e.onChangePicknum}})],1)]),e._v(" "),e.showPreLoading?o("iloading"):e._e()],1)},staticRenderFns:[]};var c=o("VU/8")(s,l,!1,function(e){o("dUvA")},null,null);t.default=c.exports}});
//# sourceMappingURL=32.ada42280ac45dbd5e358.js.map