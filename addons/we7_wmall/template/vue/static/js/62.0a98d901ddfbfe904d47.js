webpackJsonp([62],{AtH1:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Gu7T"),i=s.n(a),l=s("Cz8s"),c=s("mzkE"),o=s("NPH5"),r=s("MHEY"),n={name:"StoreGoods",data:function(){return{commentHeight:0,title:"",store:{activity:{num:0}},stat:{},comments:[],min:0,loaded:!1,loading:!1,empty:!1,preLoading:!0}},components:{PublicHeader:l.a,PublicFooter:c.a,Load:o.a,StoreHeader:r.a},methods:{onLoad:function(){var t=this;if(this.loaded)return!1;this.loading=!0,this.util.request({url:"wmall/store/comment",data:{sid:this.$route.query.sid,min:this.min}}).then(function(e){var s=e.data.message;t.store=s.message.store,t.title=s.message.store.title,t.stat=s.message.stat,t.comments=[].concat(i()(t.comments),i()(s.message.comments)),t.util.setWXTitle(t.store.title),t.comments.length||(t.loaded=!0,t.empty=!0),s.min||(t.loaded=!0),t.loading=!1,t.min=s.min,t.preLoading=!1})}},mounted:function(){this.onLoad();var t=document.documentElement.clientHeight,e=document.getElementsByClassName("header")[0].clientHeight,s=document.getElementsByClassName("store-tabs")[0].clientHeight;if(this.commentHeight=t-e-s,document.getElementById("public-header")){var a=document.getElementById("public-header").clientHeight;this.commentHeight=this.commentHeight-a}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"store-comment"}},[t.isWeixin?t._e():s("public-header",{attrs:{title:t.store.title}}),t._v(" "),s("store-header",{attrs:{store:t.store}}),t._v(" "),s("div",{staticClass:"store-tabs flex-lr van-hairline--bottom"},[s("router-link",{staticClass:"tab-item ",attrs:{to:t.util.getUrl({path:"/pages/store/goods?sid="+t.store.id}),tag:"div"}},[t._v("商品")]),t._v(" "),s("div",{staticClass:"tab-item active"},[t._v("评价")]),t._v(" "),s("router-link",{staticClass:"tab-item",attrs:{to:t.util.getUrl({path:"/pages/store/index?sid="+t.store.id}),tag:"div"}},[t._v("商家")])],1),t._v(" "),s("div",{staticClass:"comment",style:{height:t.commentHeight+"px"}},[s("div",{staticClass:"cmt-detail-info flex-lr"},[s("div",{staticClass:"cmt-detail-info-left-cell"},[s("div",{staticClass:"cmt-detail-info-data"},[s("div",{staticClass:"cmt-detail-info-receive"},[t._v(t._s(t.stat.score))])]),t._v(" "),s("div",{staticClass:"cmt-detail-info-desc"},[t._v("商家评价")])]),t._v(" "),s("div",{staticClass:"cmt-detail-info-middle-cell"},[s("div",{staticClass:"cmt-detail-info-stars"},[s("div",{staticClass:"cmt-detail-info-desc"},[t._v("商品质量")]),t._v(" "),s("div",{staticClass:"appr-status"},[t._l(t.stat.goods_quality_star,function(t){return[s("div",{staticClass:"appr-score",class:{"appr-score-all":"all"==t,"appr-score-half":"half"==t,"appr-score-gray":"gray"==t}})]})],2),t._v(" "),s("div",{staticClass:"cmt-detail-info-receive"},[t._v(t._s(t.stat.goods_quality))])]),t._v(" "),s("div",{staticClass:"cmt-detail-info-stars"},[s("div",{staticClass:"cmt-detail-info-desc"},[t._v("配送质量")]),t._v(" "),s("div",{staticClass:"appr-status"},[t._l(t.stat.delivery_service_star,function(t){return[s("div",{staticClass:"appr-score appr-score-all",class:{"appr-score-all":"all"==t,"appr-score-half":"half"==t,"appr-score-gray":"gray"==t}})]})],2),t._v(" "),s("div",{staticClass:"cmt-detail-info-receive"},[t._v(t._s(t.stat.delivery_service))])])]),t._v(" "),s("div",{staticClass:"cmt-detail-info-right-cell"},[s("div",{staticClass:"cmt-detail-info-dvy"},[t._v(t._s(t.stat.delivery_service))]),t._v(" "),s("div",{staticClass:"cmt-detail-info-desc"},[t._v("配送评分")])])]),t._v(" "),s("div",{staticClass:"evaluates-field"},[s("div",{staticClass:"evaluate-list"},[t.empty?s("div",{staticClass:"common-no-con"},[s("img",{attrs:{src:"static/img/comment_no_con.png",alt:""}}),t._v(" "),s("p",[t._v("无评价记录")])]):s("van-list",{attrs:{finished:t.loaded,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.comments,function(e){return s("div",{staticClass:"evaluate-item"},[s("div",{staticClass:"evaluate-sub clearfix"},[s("div",{staticClass:"evaluate-sub-left"},[s("img",{staticClass:"evaluate-user-pic",attrs:{src:e.avatar}})]),t._v(" "),s("div",{staticClass:"evaluate-sub-right"},[s("div",{staticClass:"evaluate-sub clearfix"},[s("div",{staticClass:"evaluate-name"},[t._v(t._s(e.mobile))]),t._v(" "),s("div",{staticClass:"evaluate-time"},[t._v(t._s(e.addtime))])]),t._v(" "),s("div",{staticClass:"evaluate-stars clearfix"},[t._l(e.scores,function(t){return[s("div",{staticClass:"appr-score appr-score-all",class:{"appr-score-all":"all"==t,"appr-score-half":"half"==t,"appr-score-gray":"gray"==t}})]}),t._v(" "),s("div",{staticClass:"evaluate-ship-time",staticStyle:{display:"none"}},[t._v("44分钟到达")]),t._v(" "),s("div",{staticStyle:{clear:"both"}})],2),t._v(" "),s("div",{staticClass:"evaluate-comment clearfix"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.note)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),e.thumbs?[1==e.thumbs.length?s("div",{staticClass:"evaluate-comment-pics clearfix"},[t._l(e.thumbs,function(a){return s("div",{staticClass:"comment-pics",on:{click:function(s){t.util.jsPreviewImage(e.thumbs)}}},[s("img",{attrs:{src:a}})])}),t._v(" "),s("div",{staticStyle:{clear:"both"}})],2):e.thumbs.length>1?s("div",{staticClass:"evaluate-comment-pics pic-multi clearfix"},[t._l(e.thumbs,function(a){return s("div",{staticClass:"comment-pics",on:{click:function(s){t.util.jsPreviewImage(e.thumbs)}}},[s("img",{attrs:{src:a}})])}),t._v(" "),s("div",{staticStyle:{clear:"both"}})],2):t._e()]:t._e(),t._v(" "),e.data.good?s("div",{staticClass:"comment-bottom clearfix"},[s("div",{staticClass:"comment-favor-icon"}),t._v(" "),s("div",{staticClass:"comment-favor-text"},[t._l(e.data.good,function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e+" ")+"\n\t\t\t\t\t\t\t\t\t\t")]})],2)]):t._e(),t._v(" "),e.reply?s("div",{staticClass:"replay"},[t._v("\n\t\t\t\t\t\t\t\t\t商家回复("+t._s(e.replytime)+"): "+t._s(e.reply)+"\n\t\t\t\t\t\t\t\t")]):t._e()],2)]),t._v(" "),s("div",{staticStyle:{clear:"both"}})])}))],1)])]),t._v(" "),s("transition",{attrs:{name:"loading"}},[t.preLoading?s("iloading"):t._e()],1)],1)},staticRenderFns:[]};var v=s("VU/8")(n,d,!1,function(t){s("rEe4")},null,null);e.default=v.exports},rEe4:function(t,e){}});