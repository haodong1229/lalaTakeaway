webpackJsonp([49],{"48BS":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Gu7T"),r=s.n(a),i=s("Cz8s"),n=s("Fd2+"),o={components:{PublicHeader:i.a},data:function(){return{active:0,now_active:0,refresh:0,status:-1,record:{page:1,psize:5,loading:!1,loaded:!1,list:[]},title:{1:"全部",2:"未领取",3:"已领取"}}},methods:{onChangeStatus:function(t,e){this.now_active!=t&&(this.refresh=1),0==t?this.status=-1:1==t?this.status=0:2==t&&(this.status=1),this.onLoad()},onLoad:function(){var t=this;if(1==this.refresh&&(this.record={page:1,psize:5,loaded:!1,loading:!1,list:[]}),this.record.loaded)return!1;this.record.loading=!0,this.util.request({url:"wheel/activity/record",data:{status:this.status,page:this.record.page,psize:this.record.psize}}).then(function(e){var s=e.data.message;s.errno?t.$toast(s.message):(s=s.message,t.record.list=[].concat(r()(t.record.list),r()(s.records)),0==t.record.list.length&&(t.record.loaded=!0),t.record.loading=!1,s.records.length<t.record.psize&&(t.record.loaded=!0),t.record.page++,t.now_active=t.active,t.refresh=0)})},onGetPrize:function(t){var e=this;n.a.confirm({title:"温馨提示",message:"确定已领取赠品吗？"}).then(function(){e.util.request({url:"wheel/activity/status",data:{id:e.id}}).then(function(t){var s=t.data.message;if(e.$toast(s.message),s.errno)return e.$toast(s.message),!1;e.refresh=1,e.onLoad()})})}},created:function(){},mounted:function(){this.onLoad()}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"wheel-record"}},[s("public-header",{attrs:{title:"中奖纪录"}}),t._v(" "),s("div",{staticClass:"content"},[s("van-tabs",{attrs:{swipeable:""},on:{click:t.onChangeStatus},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(3,function(e,a){return s("van-tab",{key:a,attrs:{title:t.title[e]}},[t.record.list.length>0?s("van-list",{attrs:{finished:t.record.loaded,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.record.loading,callback:function(e){t.$set(t.record,"loading",e)},expression:"record.loading"}},t._l(t.record.list,function(e,a){return s("div",{key:a,staticClass:"record-item"},[s("div",{staticClass:"record-body"},[s("div",{staticClass:"record-inner"},[s("span",{staticClass:"record-text-left"},[t._v("抽奖时间：")]),t._v(" "),s("span",{staticClass:"record-text-right"},[t._v(t._s(e.addtime))])]),t._v(" "),s("div",{staticClass:"record-inner"},[s("span",{staticClass:"record-text-left"},[t._v("中奖情况：")]),t._v(" "),e.type?s("span",{staticClass:"record-text-right"},[t._v(t._s(e.type.text?e.type.text:"无"))]):s("span",{staticClass:"record-text-right"},[t._v("未中奖")])]),t._v(" "),s("div",{staticClass:"record-inner"},[s("span",{staticClass:"record-text-left"},[t._v("奖品类型：")]),t._v(" "),e.award_type?s("span",{staticClass:"record-text-right"},[t._v(t._s(e.award_type.text?e.award_type.text:"无"))]):s("span",{staticClass:"record-text-right"},[t._v("无")])]),t._v(" "),s("div",{staticClass:"record-inner"},[s("span",{staticClass:"record-text-left"},[t._v("奖品详情：")]),t._v(" "),e.award_type?s("span",{staticClass:"record-text-right"},["redpacket"!=e.award_type.name?[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.award_value)+t._s("credit1"==e.award_type.name?"积分":"元")+"\n\t\t\t\t\t\t\t\t\t")]:t._l(e.award_value,function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t")]})],2):s("span",{staticClass:"record-text-right"},[t._v("\n\t\t\t\t\t\t\t\t\t未中奖\n\t\t\t\t\t\t\t\t")])])]),t._v(" "),0==e.status?s("div",{staticClass:"record-footer"},[s("div",{staticClass:"record-status",on:{click:function(s){t.onGetPrize(e.id)}}},[t._v("已领取")])]):t._e()])})):s("div",{staticClass:"no-data"},[s("div",{staticClass:"bg"}),t._v(" "),s("p",[t._v("暂时没有中奖记录哦～")])])],1)}))],1)],1)},staticRenderFns:[]};var d=s("VU/8")(o,c,!1,function(t){s("fuK1")},null,null);e.default=d.exports},fuK1:function(t,e){}});
//# sourceMappingURL=49.9dbbac40d6c39a68e485.js.map