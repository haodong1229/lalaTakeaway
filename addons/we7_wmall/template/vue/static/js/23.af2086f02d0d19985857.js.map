{"version":3,"sources":["webpack:///src/pages/paotui/map.vue","webpack:///./src/pages/paotui/map.vue?ddf0","webpack:///./src/pages/paotui/map.vue"],"names":["map","name","data","id","Number","markers","order","deliveryer","AMap","Object","methods","onLoad","_this","this","util","request","url","then","res","result","message","errno","$toast","status","loadmap","that","Map","resizeEnable","center","accept_location_y","accept_location_x","zoom","marker","Marker","position","offset","Pixel","content","setMap","buy_location_x","buy_location_y","panTo","delivery_success_location_y","delivery_success_location_x","avatar","location_y","location_x","push","setFitView","onRefresh","deliveryer_id","remove","onQuestion","$dialog","confirm","showCancelButton","created","$route","query","mounted","_this2","setInterval","paotui_map","render","_h","$createElement","_c","_self","attrs","_v","staticClass","tag","to","getUrl","path","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/23.af2086f02d0d19985857.js","sourcesContent":["<template>\r\n\t<div id=\"order-map\">\r\n\t\t<div id=\"map-container\"></div>\r\n\t\t<router-link tag=\"div\" :to=\"util.getUrl({path: '/pages/paotui/detail', query: {id: id}})\" class=\"icons back-icon\">\r\n\t\t\t<div class=\"icon icon-arrow-left\"></div>\r\n\t\t</router-link>\r\n\t\t<div class=\"icons refresh-icon\" @click=\"onRefresh\">\r\n\t\t\t<div class=\"icon icon-refresh\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"icons question-icon\" @click=\"onQuestion\">\r\n\t\t\t<div class=\"icon icon-question font-20\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {Amap} from '@/config/AMap'\r\n\texport default {\r\n\t\tname: \"orderMap\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: Number,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\torder: {},\r\n\t\t\t\tdeliveryer: {},\r\n\t\t\t\tAMap: Amap()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonLoad() {\r\n\t\t\t\tthis.util.request({\r\n\t\t\t\t\turl: 'errander/order/location',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: this.id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tvar result = res.data.message;\r\n\t\t\t\t\tif(result.errno) {\r\n\t\t\t\t\t\tthis.util.$toast(result.message);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.order = result.message.order;\r\n\t\t\t\t\tthis.deliveryer = result.message.deliveryer;\r\n\t\t\t\t\tif(this.order.status == 3) {\r\n\t\t\t\t\t\tthis.util.$toast('订单已完成！');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loadmap();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloadmap(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.AMap.then(function(AMap){\r\n\t\t\t\t\tthat.map = new AMap.Map('map-container', {\r\n\t\t\t\t\t\tresizeEnable: true,\r\n\t\t\t\t\t\tcenter: [that.order.accept_location_y, that.order.accept_location_x],\r\n\t\t\t\t\t\tzoom: 10\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//收货位置\r\n\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\tposition: [that.order.accept_location_y, that.order.accept_location_x],\r\n\t\t\t\t\t\toffset: new AMap.Pixel(-35, -35),\r\n\t\t\t\t\t\tcontent: '<div class=\"marker-mine-route\"></div>'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmarker.setMap(that.map);\r\n\r\n\t\t\t\t\t//取货地址\r\n\t\t\t\t\tif(that.order.buy_location_x && that.order.buy_location_y) {\r\n\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\tposition: [that.order.buy_location_y, that.order.buy_location_x],\r\n\t\t\t\t\t\t\toffset: new AMap.Pixel(-23, -74),\r\n\t\t\t\t\t\t\tcontent: '<div class=\"marker-start-route\"></div>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//配送员位置\r\n\t\t\t\t\tif(that.order.status == 3) {\r\n\t\t\t\t\t\tthat.map.panTo([that.order.delivery_success_location_y, that.order.delivery_success_location_x]);\r\n\t\t\t\t\t\tvar avatar = that.deliveryer.avatar;\r\n\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\tposition: [that.order.delivery_success_location_y, that.order.delivery_success_location_x],\r\n\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src='+ avatar +' alt=\"\"/></div>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.map.panTo([that.deliveryer.location_y, that.deliveryer.location_x]);\r\n\t\t\t\t\t\tvar avatar = that.deliveryer.avatar;\r\n\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\tposition: [that.deliveryer.location_y, that.deliveryer.location_x],\r\n\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src='+ avatar +' alt=\"\"/></div>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\tthat.markers.push(marker);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.map.setFitView();\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tonRefresh() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(that.order.status == 3){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthat.util.request({\r\n\t\t\t\t\turl: 'system/common/deliveryer/location',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: that.order.deliveryer_id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tvar result = res.data.message;\r\n\t\t\t\t\tif(result.errno) {\r\n\t\t\t\t\t\tthat.util.$toast(result.message);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar deliveryer = result.message;\r\n\t\t\t\t\tthat.AMap.then(function(AMap){\r\n\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\tposition: [deliveryer.location_y, deliveryer.location_x],\r\n\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src=\"'+ deliveryer.avatar +'\" alt=\"\"/></div>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.map.remove(that.markers);\r\n\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\tthat.markers.push(marker);\r\n\t\t\t\t\t\tthat.map.setFitView();\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonQuestion() {\r\n\t\t\t\tthis.$dialog.confirm({\r\n\t\t\t\t\tmessage: '要获取最新位置，请点击刷新按钮；如果配送员远离您，那可能是正在为更早下单的用户配送，请耐心等待~',\r\n\t\t\t\t\tshowCancelButton: false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif(this.$route.query.id) {\r\n\t\t\t\tthis.id = this.$route.query.id\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.onLoad();\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.onRefresh();\r\n\t\t\t}, 30000)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#order-map{\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\t#order-map #map-container{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t#order-map .icons{\r\n\t\tposition: absolute;\r\n\t\tz-index: 100;\r\n\t\theight: 36px;\r\n\t\twidth: 36px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 36px;\r\n\t\tborder-radius: 100%;\r\n\t\tbackground: #9b9a96;\r\n\t\topacity: 0.8;\r\n\t\tcolor: #FFF;\r\n\t}\r\n\t#order-map .back-icon{\r\n\t\ttop: 15px;\r\n\t\tleft: 15px;\r\n\t}\r\n\t#order-map .refresh-icon{\r\n\t\ttop: 15px;\r\n\t\tright: 15px;\r\n\t}\r\n\t#order-map .question-icon{\r\n\t\tbottom: 15px;\r\n\t\tright: 15px;\r\n\t}\r\n\t#order-map .amap-marker .marker-deliveyer-route{\r\n\t\tposition: relative; \r\n\t\twidth: 52px; \r\n\t\theight: 80px; \r\n\t\tcolor: #e90000; \r\n\t\tbackground: url(../../../static/img/map-location.png) no-repeat 0 0;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t#order-map .amap-marker .marker-deliveyer-route img{\r\n\t\tposition:absolute; \r\n\t\ttop: 5px; \r\n\t\tright: 5px; \r\n\t\twidth: 42px; \r\n\t\theight: 42px; \r\n\t\tborder-radius: 100%;\r\n\t}\r\n\t#order-map .amap-marker .marker-start-head-route {\r\n\t\tposition: relative;\r\n\t\twidth: 70px;\r\n\t\theight: 70px;\r\n\t\tcolor: #e90000;\r\n\t\tbackground: url(../../../static/img/map-start-head.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t#order-map .amap-marker .marker-start-head-route img {\r\n\t\tposition: absolute;\r\n\t\ttop: 12px;\r\n\t\tright: 12px;\r\n\t\twidth: 46px;\r\n\t\theight: 46px;\r\n\t\tborder-radius: 100%\r\n\t}\r\n\t#order-map .amap-marker .marker-mine-route {\r\n\t\tposition: relative;\r\n\t\twidth: 70px;\r\n\t\theight: 70px;\r\n\t\tcolor: #e90000;\r\n\t\tbackground: url(../../../static/img/map-lbs.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.amap-marker .marker-mine-route img {\r\n\t\tposition: absolute;\r\n\t\ttop: 12px;\r\n\t\tright: 12px;\r\n\t\twidth: 46px;\r\n\t\theight: 46px;\r\n\t\tborder-radius: 100%\r\n\t}\r\n\t.amap-marker .marker-start-route {\r\n\t\tposition: relative;\r\n\t\twidth: 54px;\r\n\t\theight: 74px;\r\n\t\tbackground: url(../../../static/img/map-start.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/paotui/map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"order-map\"}},[_c('div',{attrs:{\"id\":\"map-container\"}}),_vm._v(\" \"),_c('router-link',{staticClass:\"icons back-icon\",attrs:{\"tag\":\"div\",\"to\":_vm.util.getUrl({path: '/pages/paotui/detail', query: {id: _vm.id}})}},[_c('div',{staticClass:\"icon icon-arrow-left\"})]),_vm._v(\" \"),_c('div',{staticClass:\"icons refresh-icon\",on:{\"click\":_vm.onRefresh}},[_c('div',{staticClass:\"icon icon-refresh\"})]),_vm._v(\" \"),_c('div',{staticClass:\"icons question-icon\",on:{\"click\":_vm.onQuestion}},[_c('div',{staticClass:\"icon icon-question font-20\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d5d93c50\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/paotui/map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d5d93c50\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./map.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d5d93c50\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/paotui/map.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}