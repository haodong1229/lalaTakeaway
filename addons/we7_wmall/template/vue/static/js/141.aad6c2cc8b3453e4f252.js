webpackJsonp([141],{"41Wz":function(t,s){},SJb0:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={components:{PublicHeader:i("Cz8s").a},data:function(){return{title:"商品详情",showPreLoading:!0,id:Number,goods:{},store:{},buyers:[],buyers_num:Number,time:{},flag:!1}},methods:{onLoad:function(){var t=this;this.util.request({url:"seckill/seckill/detail",data:{id:this.id}}).then(function(s){t.showPreLoading=!1;var i=s.data.message;if(i.errno)return t.util.$toast(i.message),!1;if(t.goods=i.message.goods,t.store=i.message.store,t.buyers=i.message.buyers,t.buyers_num=i.message.buyers_num,t.title=t.goods.title,t.util.setWXTitle(t.title),0==t.goods.end)var a=setInterval(function(){1==t.flag&&clearInterval(a),t.timeDown()},1e3)})},timeDown:function(){var t=new Date(this.goods.endtime_js),s=new Date,i=parseInt((t.getTime()-s.getTime())/1e3),a=this.formate(parseInt(i/86400)),e=this.formate(parseInt(i/3600%24)),n=this.formate(parseInt(i/60%60)),o=this.formate(parseInt(i%60));i<=0&&(this.flag=!0),this.time={days:a,hours:e,minutes:n,seconds:o}},formate:function(t){return t>=10?t:"0"+t}},created:function(){this.$route.query.id&&(this.id=this.$route.query.id)},mounted:function(){this.onLoad()}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"seckill-detail"}},[i("public-header",{attrs:{title:t.title}}),t._v(" "),i("div",{staticClass:"content"},[t.goods.slides&&t.goods.slides.length>0?i("van-swipe",{attrs:{autoplay:3e3}},t._l(t.goods.slides,function(t,s){return i("van-swipe-item",{key:s},[i("img",{attrs:{src:t,alt:""}})])})):i("div",{staticClass:"goods-thumb"},[i("img",{attrs:{src:t.goods.thumb,alt:""}})]),t._v(" "),i("div",{staticClass:"decoration"},[i("div",{staticClass:"price-container"},[i("div",{staticClass:"price"},[t._v("¥"),i("span",[t._v(t._s(t.goods.price))])]),t._v(" "),i("div",{staticClass:"old-price"},[t._v(" 原价¥"+t._s(t.goods.old_price)+" ")])]),t._v(" "),0==t.goods.end&&0==t.goods.all_sailed?i("div",{staticClass:"countdown"},[i("div",{staticClass:"countdown_text"},[t._v("距离结束还有")]),t._v(" "),i("div",{staticClass:"time"},[i("span",[t._v(t._s(t.time.days))]),t._v("\n\t\t\t\t\t:\n\t\t\t\t\t"),i("span",[t._v(t._s(t.time.hours))]),t._v("\n\t\t\t\t\t:\n\t\t\t\t\t"),i("span",[t._v(t._s(t.time.minutes))]),t._v("\n\t\t\t\t\t:\n\t\t\t\t\t"),i("span",[t._v(t._s(t.time.seconds))])])]):i("div",{staticClass:"end-tip"},[t._v(t._s(t.goods.end?"活动已结束":"商品已售罄"))])]),t._v(" "),i("div",{staticClass:"activity-info"},[i("div",{staticClass:"title-favor van-hairline--bottom"},[i("div",{staticClass:"title"},[t._v(t._s(t.goods.title))]),t._v(" "),t.goods.click>0?i("div",{staticClass:"favor"},[i("van-icon",{attrs:{name:"hotfill"}}),t._v(t._s(t.goods.click)+"人关注")],1):t._e()]),t._v(" "),i("div",{staticClass:"title-favor van-hairline--bottom"},[i("div",{staticClass:"title"},[t._v("抢购时间")]),t._v(" "),i("div",{staticClass:"favor goods-time"},[t._v(t._s(t.goods.starttime_cn)+" 至 "+t._s(t.goods.endtime_cn))])]),t._v(" "),t.buyers_num>0?i("div",{staticClass:"sold"},[i("div",{staticClass:"avatars"},t._l(t.buyers,function(t,s){return i("div",{key:s,staticClass:"avatar-item"},[i("img",{attrs:{src:t.avatar,alt:""}})])})),t._v(" "),i("div",[t._v("已有"+t._s(t.buyers_num)+"人购买"),i("van-icon",{attrs:{name:"right"}})],1)]):t._e()]),t._v(" "),i("div",{staticClass:"info"},[i("div",{staticClass:"info-title van-hairline--bottom"},[t._v("适用店铺")]),t._v(" "),i("div",{staticClass:"info-content"},[i("div",{staticClass:"store van-hairline--bottom"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:t.store.logo,alt:""}})]),t._v(" "),i("div",{staticClass:"store-info"},[i("div",{staticClass:"title"},[t._v(t._s(t.store.title))]),t._v(" "),i("div",{staticClass:"opening-hours"},[t._v(" 营业时间 "+t._s(t.store.business_hours_cn)+" ")])]),t._v(" "),i("a",{staticClass:"tel",attrs:{href:"tel:"+t.store.telephone}},[i("van-icon",{attrs:{name:"telephone"}})],1)]),t._v(" "),i("div",{staticClass:"address",on:{click:function(s){t.util.jsLocation({lat:t.store.location_x,lng:t.store.location_y})}}},[i("van-icon",{attrs:{name:"locationfill"}}),t._v(" "),i("div",{staticClass:"address-info"},[t._v(t._s(t.store.address))]),t._v(" "),i("van-icon",{attrs:{name:"right"}})],1)])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"info tips"},[i("div",{staticClass:"info-title van-hairline--bottom"},[t._v("购买须知")]),t._v(" "),i("div",{staticClass:"info-content"},[i("div",{staticClass:"tip-item"},[i("span",{staticClass:"tip-title"},[t._v("活动截止日期：")]),t._v(" "),i("span",[t._v(t._s(t.goods.endtime_cn))])]),t._v(" "),i("div",{staticClass:"tip-item"},[i("span",{staticClass:"tip-title"},[t._v("消费截止日期：")]),t._v(" "),i("span",[t._v("购买后"+t._s(t.goods.use_limit_day)+"天")])])])]),t._v(" "),i("div",{staticClass:"info-goods"},[i("div",{staticClass:"info-title van-hairline--bottom"},[t._v("商品详情")]),t._v(" "),i("div",{staticClass:"info-content",domProps:{innerHTML:t._s(t.goods.description)}})]),t._v(" "),i("div",{staticClass:"bottom-navs"},[i("div",{staticClass:"navs van-hairline--top"},[i("div",{staticClass:"nav-item",on:{click:function(s){t.util.jsUrl(t.store.url)}}},[i("van-icon",{attrs:{name:"shop"}}),t._v(" "),i("div",[t._v("店铺")])],1),t._v(" "),i("a",{staticClass:"nav-item",attrs:{href:"tel:"+t.store.telephone}},[i("van-icon",{attrs:{name:"telephone"}}),t._v(" "),i("div",[t._v("电话")])],1),t._v(" "),i("router-link",{staticClass:"nav-item",attrs:{to:t.util.getUrl({path:"/pages/seckill/orderList"})}},[i("van-icon",{attrs:{name:"order"}}),t._v(" "),i("div",[t._v("订单")])],1)],1),t._v(" "),0==t.goods.end&&0==t.goods.all_sailed?i("router-link",{staticClass:"buy-btn",attrs:{to:t.util.getUrl({path:"/pages/seckill/create",query:{id:t.id}})}},[t._v("立即抢购")]):i("div",{staticClass:"buy-btn disabled"},[t._v(t._s(t.goods.end?"活动已结束":"商品已售罄"))])],1)],1),t._v(" "),i("transition",{attrs:{name:"loading"}},[t.showPreLoading?i("iloading"):t._e()],1)],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"info steps"},[i("div",{staticClass:"info-title van-hairline--bottom"},[t._v("抢购流程")]),t._v(" "),i("div",{staticClass:"info-content"},[i("div",{staticClass:"step"},[i("div",{staticClass:"icon icon-friend"}),t._v(" "),i("div",{staticClass:"step-title"},[t._v("参与抢购")])]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"step"},[i("div",{staticClass:"icon icon-squarecheck"}),t._v(" "),i("div",{staticClass:"step-title"},[t._v("付款成功")])]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"step"},[i("div",{staticClass:"icon icon-edit1"}),t._v(" "),i("div",{staticClass:"step-title"},[t._v("到店验证")])])])])}]};var n=i("VU/8")(a,e,!1,function(t){i("41Wz")},null,null);s.default=n.exports}});
//# sourceMappingURL=141.aad6c2cc8b3453e4f252.js.map