webpackJsonp([38],{"8viI":function(t,i){},ANPk:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("woOf"),o=e.n(n),s=e("Dd8w"),a=e.n(s),c=e("NYxO"),l=e("deIj"),r={data:function(){return{searchTitle:"搜索",condition:{},showPreLoading:!0,datePicker:{minDate:new Date(2016,1),maxDate:new Date,currentDate:new Date,status:!1},time:{typeInput:"start",minDate:new Date(2017,12,1),maxDate:new Date,currentDate:new Date},popupStatus:{}}},components:{publicHeader:e("Cz8s").a},methods:a()({},Object(c.b)(["setSearch","getSearch","replaceState"]),{onToggleDatePicker:function(t){this.datePicker.status=!this.datePicker.status,t&&(this.time.typeInput=t)},onConfirmTime:function(t){var i=this.util.formatDate(t,"date");this.time[this.time.typeInput]=i,this.onToggleDatePicker()},onChooseOption:function(t,i){var e=this.condition.list[t],n=this.condition.list[t].options[i];this.condition.list[t].selected=n,this.onTogglePopup(e.name),this.condition=o()({},this.condition)},onSearchConfirm:function(){var t=this.onGetFilter();if(0==t.num)return this.util.$toast("请至少选择一个筛选项目"),!1;this.filter=t,this.replaceState({key:"filter",val:this.filter});var i=this.util.getUrl({path:this.isearch.redirctUrl});this.$router.push(i)},onSearchCancel:function(){this.onIint(!0)},onGetFilter:function(){var t={items:{},num:0};for(var i in this.condition.list){var e=this.condition.list[i];this.condition.time&&e.name==this.condition.time.name&&1==this.condition.list[this.condition.time.name].selected.iscustom?(t.items[this.condition.time.name]=e.selected.value,t.items[this.condition.time.key]=this.time):e.name&&e.selected&&(t.items[e.name]=e.selected.value),e.selected.value!=e.defaultSelected.value&&t.num++}for(var n in this.condition.input){var o=this.condition.input[n];o.value&&"undefined"!=o.value&&o.value!=o.defaultValue&&(t.items[n]=o.value,t.num++)}return this.condition.time&&this.time.start&&this.time.end&&(t.items[this.condition.time.name]={start:this.time.start,end:this.time.end},t.num++),t},onIint:function(t){for(var i in this.condition.list)if(t)this.condition.list[i].selected=this.condition.list[i].defaultSelected;else if(this.condition.list[i].defaultSelected=this.condition.list[i].options[0],this.condition.list[i].selected||(this.condition.list[i].selected=this.condition.list[i].options[0]),this.condition.list[i].type&&"time"==this.condition.list[i].type){var e=this.condition.list[i].key||"addtime",n=this.condition.list[i].selected;(!n||n&&!n[e])&&(n[e]={start:this.util.formatDate(new Date),end:this.util.formatDate(new Date)}),this.condition.time={name:this.condition.list[i].name,key:e},this.time.start=n[e].start,this.time.end=n[e].end}for(var s in this.condition.input)t?this.condition.input[s].value=this.condition.input[s].defaultValue:this.condition.input[s].defaultValue=this.condition.input[s].value?this.condition.input[s].value:"";this.condition.time&&(this.time.start="",this.time.end=""),this.condition=o()({},this.condition)},onTogglePopup:function(t){this.popupStatus[t]=!this.popupStatus[t],this.popupStatus=o()({},this.popupStatus)},onLoad:function(){var t=this;if(t.getSearch(),!t.isearch)return this.util.$toast("url错误"),!1;t.searchTitle=t.isearch.title,Object(l.a)({vue:t,url:t.isearch.url,success:function(i){t.condition=i.filter,t.onIint()}})}}),computed:a()({},Object(c.c)(["isearch"])),mounted:function(){this.onLoad()}},u={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"isearch"}},[e("public-header",{attrs:{title:t.searchTitle}}),t._v(" "),t.condition?e("div",{staticClass:"content"},[e("van-cell-group",[t._l(t.condition.input,function(i,n){return t.condition.input?[e("van-field",{attrs:{label:i.title,placeholder:i.placeholder?i.placeholder:"点击输入","input-align":"right"},model:{value:t.condition.input[n].value,callback:function(i){t.$set(t.condition.input[n],"value",i)},expression:"condition.input[searchIndex].value"}})]:t._e()}),t._v(" "),t._l(t.condition.list,function(i,n){return[e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.title))]),t._v(" "),e("div",{staticClass:"c-gray",attrs:{slot:"right-icon"},on:{click:function(e){t.onTogglePopup(i.name)}},slot:"right-icon"},[t._v("\n\t\t\t\t\t\t"+t._s(i.selected?i.selected.title:"点击选择")+"\n\t\t\t\t\t\t"),e("van-icon",{attrs:{name:"arrow"}})],1)])]}),t._v(" "),t.condition.time?[e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.condition.time.start))]),t._v(" "),e("div",{staticClass:"c-gray",attrs:{slot:"right-icon"},on:{click:function(i){t.onToggleDatePicker("start")}},slot:"right-icon"},[t._v("\n\t\t\t\t\t\t"+t._s(this.time.start?this.time.start:"点击选择")+"\n\t\t\t\t\t\t"),e("van-icon",{attrs:{name:"arrow"}})],1)]),t._v(" "),e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.condition.time.end))]),t._v(" "),e("div",{staticClass:"c-gray",attrs:{slot:"right-icon"},on:{click:function(i){t.onToggleDatePicker("end")}},slot:"right-icon"},[t._v("\n\t\t\t\t\t\t"+t._s(this.time.end?this.time.end:"点击选择")+"\n\t\t\t\t\t\t"),e("van-icon",{attrs:{name:"arrow"}})],1)])]:t._e()],2),t._v(" "),e("van-row",{staticClass:"padding-10"},[e("van-col",{staticClass:"padding-10",attrs:{span:"12"}},[e("van-button",{attrs:{size:"normal",block:""},on:{click:t.onSearchCancel}},[t._v("重置")])],1),t._v(" "),e("van-col",{staticClass:"padding-10",attrs:{span:"12"}},[e("van-button",{staticClass:"bg-primary",attrs:{size:"normal",block:""},on:{click:t.onSearchConfirm}},[t._v("搜索")])],1)],1),t._v(" "),t._l(t.condition.list,function(i,n){return[e("van-popup",{attrs:{position:"bottom"},model:{value:t.popupStatus[i.name],callback:function(e){t.$set(t.popupStatus,i.name,e)},expression:"popupStatus[searchItem.name]"}},[e("div",{staticClass:"popup-title flex-lr van-hairline--bottom"},[e("span",{staticClass:"c-gray",on:{click:function(e){t.onTogglePopup(i.name)}}},[t._v("取消")]),t._v(" "),e("span",[t._v(t._s(i.title))]),t._v(" "),e("span",{staticClass:"c-primary"})]),t._v(" "),e("div",{staticClass:"popup-content"},[e("van-radio-group",{model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"searchItem.selected"}},[e("van-cell-group",t._l(i.options,function(i,o){return e("van-cell",{key:o,attrs:{title:i.title,clickable:""},on:{click:function(i){t.onChooseOption(n,o)}}},[e("van-radio",{attrs:{name:i}})],1)}))],1)],1)])]}),t._v(" "),e("van-popup",{staticClass:"popup-time",attrs:{position:"bottom"},model:{value:t.datePicker.status,callback:function(i){t.$set(t.datePicker,"status",i)},expression:"datePicker.status"}},[e("van-datetime-picker",{attrs:{type:"date","min-date":t.time.minDate,"max-date":t.time.maxDate},on:{confirm:t.onConfirmTime,cancel:t.onToggleDatePicker},model:{value:t.time.currentDate,callback:function(i){t.$set(t.time,"currentDate",i)},expression:"time.currentDate"}})],1)],2):t._e(),t._v(" "),t.showPreLoading?e("iloading"):t._e()],1)},staticRenderFns:[]};var d=e("VU/8")(r,u,!1,function(t){e("8viI")},null,null);i.default=d.exports}});