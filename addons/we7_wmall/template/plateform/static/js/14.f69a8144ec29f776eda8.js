webpackJsonp([14],{"3Dpx":function(s,t){},E8jw:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("Cz8s"),a=e("deIj"),n={data:function(){return{records:{page:1,psize:15,loading:!1,finished:!1,empty:!1,data:[]},isRefresh:!1,showPreLoading:!0,filter:{items:{}}}},components:{publicHeader:i.a},methods:{onLoad:function(s){Object(a.b)({vue:this,force:s,url:"plateform/member/list/list"})},onPullDownRefresh:function(){this.onLoad(!0)},onChangeStatus:function(s,t,e){var i=this;i.util.jspost({url:"plateform/member/list/status",data:{id:s.id,status:t},confirm:"确定加入黑名单吗？",success:function(){i.records.data[e].status=t}})},onDeleteMember:function(s,t){var e=this;e.util.jspost({url:"plateform/member/list/del",data:{id:s.id,uid:s.uid},confirm:"确定删除吗？",success:function(){e.records.data.splice(t,1)}})}},mounted:function(){this.onLoad()},watch:{filter:{handler:function(s,t){this.onLoad(!0)},deep:!0}}},r={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{attrs:{id:"member-list"}},[e("public-header",{attrs:{title:"顾客列表"}}),s._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"wrap-search wrap-search-notab"},[e("van-search",{attrs:{placeholder:"请输入用户名/手机号/UID"},model:{value:s.filter.items.keyword,callback:function(t){s.$set(s.filter.items,"keyword",t)},expression:"filter.items.keyword"}})],1),s._v(" "),e("van-pull-refresh",{on:{refresh:function(t){s.onPullDownRefresh()}},model:{value:s.isRefresh,callback:function(t){s.isRefresh=t},expression:"isRefresh"}},[s.records.empty?e("div",{staticClass:"no-data"},[e("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),s._v(" "),e("p",[s._v("没有符合条件的数据!")])]):e("van-list",{staticClass:"member-list",attrs:{finished:s.records.finished,offset:100,"immediate-check":!1},on:{load:s.onLoad},model:{value:s.records.loading,callback:function(t){s.$set(s.records,"loading",t)},expression:"records.loading"}},[s._l(s.records.data,function(t,i){return e("div",{key:t.id,staticClass:"member-item"},[e("van-row",[e("van-col",{attrs:{span:"4"}},[e("div",{staticClass:"member-img"},[e("img",{staticClass:"img-100",attrs:{src:t.avatar,alt:""}})])]),s._v(" "),e("van-col",{attrs:{span:"20"}},[e("div",{staticClass:"member-right"},[e("div",{staticClass:"member-title flex-lr"},[e("div",{staticClass:"flex member-title-left ellipsis"},[e("div",{staticClass:"member-name"},[s._v(s._s(t.nickname))]),s._v(" "),e("div",{staticClass:"c-default font-15"},[s._v("UID:"+s._s(t.uid))])]),s._v(" "),e("div",{staticClass:"flex"},[t.openid?e("div",{staticClass:"itag itag-primary"},[s._v("公众号")]):s._e(),s._v(" "),t.openid_wxapp?e("div",{staticClass:"itag itag-info margin-10-l"},[s._v("小程序")]):s._e()])]),s._v(" "),e("div",{staticClass:"member-info flex"},[e("div",{staticClass:"member-price"},[s._v("账户余额："),e("span",{staticClass:"c-danger"},[s._v("￥"+s._s(t.credit2))])]),s._v(" "),e("div",{staticClass:"font-14 c-gray"},[s._v("积分余额："),e("span",{staticClass:"c-danger"},[s._v(s._s(t.credit1))])])]),s._v(" "),e("div",{staticClass:"member-info flex"},[e("div",[s._v("成功下单："+s._s(t.success_num)+"次/"+s._s(t.success_price)+"元")])]),s._v(" "),e("div",{staticClass:"member-info flex"},[e("div",[s._v("取消下单："+s._s(t.cancel_num)+"次/"+s._s(t.cancel_price)+"元")])]),s._v(" "),0!=t.success_first_time?e("div",{staticClass:"member-info flex"},[e("div",[s._v("首次下单时间："+s._s(t.success_first_time_cn))])]):s._e(),s._v(" "),0!=t.success_last_time?e("div",{staticClass:"member-info flex"},[e("div",[s._v("最近一次下单时间："+s._s(t.success_last_time_cn))])]):s._e(),s._v(" "),t.card?e("div",{staticClass:"member-info flex"},[e("div",[s._v("套餐类型：")]),s._v(" "),e("div",{staticClass:"member-status itag itag-danger"},[s._v(s._s(t.card))])]):s._e(),s._v(" "),0!=t.setmeal_starttime&&0!=t.setmeal_endtime?[e("div",{staticClass:"member-info flex"},[e("div",[s._v("套餐时间：")]),s._v(" "),e("div",{staticClass:"member-status itag itag-danger"},[s._v(s._s(t.setmeal_starttime_cn)+"~"+s._s(t.setmeal_endtime_cn))])]),s._v(" "),e("div",{staticClass:"member-info flex"},[e("div",[s._v("套餐状态：")]),s._v(" "),e("div",{staticClass:"member-status itag",class:{"itag-primary":"未到期"==t.setmeal_status,"itag-disabled":"已到期"==t.setmeal_status}},[s._v(s._s(t.setmeal_status))])])]:s._e()],2)])],1),s._v(" "),e("div",{staticClass:"border-1px-t btn-group"},[e("router-link",{staticClass:"btn-item bg-info",attrs:{to:s.util.getUrl({path:"pages/member/change",query:{uid:t.uid}}),tag:"div"}},[s._v("账户变动")]),s._v(" "),0==t.status?e("div",{staticClass:"btn-item bg-danger",on:{click:function(e){s.onChangeStatus(t,1,i)}}},[s._v("移出黑名单")]):s._e(),s._v(" "),1==t.status?e("div",{staticClass:"btn-item bg-default",on:{click:function(e){s.onChangeStatus(t,0,i)}}},[s._v("加入黑名单")]):s._e(),s._v(" "),e("div",{staticClass:"btn-item",on:{click:function(e){s.onDeleteMember(t,i)}}},[s._v("删除")])],1)],1)}),s._v(" "),s.records.finished?e("div",{staticClass:"loaded"},[e("div",{staticClass:"loaded-tips"},[s._v("没有更多了")])]):s._e()],2)],1)],1),s._v(" "),s.showPreLoading?e("iloading"):s._e()],1)},staticRenderFns:[]};var c=e("VU/8")(n,r,!1,function(s){e("3Dpx")},null,null);t.default=c.exports}});