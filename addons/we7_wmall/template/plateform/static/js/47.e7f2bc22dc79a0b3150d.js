webpackJsonp([47],{jQjs:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("Cz8s"),n=e("+CBI"),a=e("deIj"),o={data:function(){return{showPreLoading:!0,islegal:!1,order:{grant_credit:{credit1:{grant_num:"0",grant_type:"1",status:"1",grant_num_1:"0",grant_num_2:"0"}}},popupStatus:{credit1:!1}}},components:{publicHeader:i.a,iswitch:n.a},methods:{onLoad:function(){var t=this,r=this;Object(a.a)({vue:this,autoAssign:!0,variable:"order",url:"plateform/config/takeout/order",success:function(e){r.islegal=!0,"1"==e.order.grant_credit.credit1.grant_type&&(t.order.grant_credit.credit1.grant_num_1=e.order.grant_credit.credit1.grant_num,t.order.grant_credit.credit1.grant_num_2="0"),"2"==e.order.grant_credit.credit1.grant_type&&(t.order.grant_credit.credit1.grant_num_2=e.order.grant_credit.credit1.grant_num,t.order.grant_credit.credit1.grant_num_1="0")}})},jsToggleSwitch:function(t){this.util.jsToggleSwitch({vue:this,key:t.key||t.keys,value:t.value})},onSubmit:function(){var t=this;if(!t.islegal)return!1;t.islegal=!1,Object(a.c)({vue:this,url:"plateform/config/takeout/order",data:t.order,redirect:t.util.getUrl({path:"/pages/config/index"}),fail:function(r){t.util.$toast(r),t.islegal=!0}})},onTogglePopup:function(t){this.popupStatus[t]=!this.popupStatus[t]}},mounted:function(){this.onLoad()}},c={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{attrs:{id:"takeout-grantnum"}},[e("public-header",{attrs:{title:"积分赠送"}}),t._v(" "),e("div",{staticClass:"content"},[e("van-cell-group",[e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("积分赠送状态")]),t._v(" "),e("iswitch",{attrs:{slot:"right-icon",value:t.order.grant_credit.credit1.status,"condition-open":"1","condition-close":"0","text-open":"ON","text-close":"OFF",keys:"order.grant_credit.credit1.status"},on:{change:t.jsToggleSwitch},slot:"right-icon"})],1)],1),t._v(" "),e("van-radio-group",{staticClass:"margin-10-t",model:{value:t.order.grant_credit.credit1.grant_type,callback:function(r){t.$set(t.order.grant_credit.credit1,"grant_type",r)},expression:"order.grant_credit.credit1.grant_type"}},[e("van-cell-group",[e("van-cell",{attrs:{title:"积分赠送模式"}},[e("div",{staticClass:"c-gray",attrs:{slot:"right-icon"},on:{click:function(r){t.onTogglePopup("credit1")}},slot:"right-icon"},[t._v("\n\t\t\t\t\t\t具体设置"),e("van-icon",{attrs:{name:"arrow"}})],1)]),t._v(" "),e("van-cell",{staticClass:"border-0px",attrs:{title:"固定比例",clickable:"",label:2==t.order.grant_credit.credit1.grant_type?"按比例赠送"+t.order.grant_credit.credit1.grant_num_2+"积分":""},on:{click:function(r){t.order.grant_credit.credit1.grant_type=2}}},[e("van-radio",{attrs:{name:2}})],1),t._v(" "),e("van-cell",{staticClass:"border-0px",attrs:{title:"固定积分",clickable:"",label:1==t.order.grant_credit.credit1.grant_type?"固定赠送"+t.order.grant_credit.credit1.grant_num_1+"积分":""},on:{click:function(r){t.order.grant_credit.credit1.grant_type=1}}},[e("van-radio",{attrs:{name:1}})],1)],1)],1),t._v(" "),e("div",{staticClass:"padding-15"},[e("van-button",{attrs:{size:"normal",type:"primary",disabled:!t.islegal,block:""},on:{click:t.onSubmit}},[t._v("保存修改")])],1)],1),t._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:t.popupStatus.credit1,callback:function(r){t.$set(t.popupStatus,"credit1",r)},expression:"popupStatus.credit1"}},[e("div",{staticClass:"popup-title"},[e("span",{staticClass:"c-gray",on:{click:function(r){t.onTogglePopup("credit1")}}},[t._v("取消")]),t._v(" "),2==t.order.grant_credit.credit1.grant_type?e("span",[t._v("积分赠送模式(按比例)")]):1==t.order.grant_credit.credit1.grant_type?e("span",[t._v("积分赠送模式(固定)")]):t._e(),t._v(" "),e("span",{staticClass:"c-primary",on:{click:function(r){t.onTogglePopup("credit1")}}},[t._v("确定")])]),t._v(" "),e("div",{staticClass:"popup-content"},[1==t.order.grant_credit.credit1.grant_type?[e("van-cell-group",[e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("固定积分")])]),t._v(" "),e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("每单固定")]),t._v(" "),e("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e("div",{staticClass:"input-unit"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.order.grant_credit.credit1.grant_num_1,expression:"order.grant_credit.credit1.grant_num_1"}],attrs:{type:"text"},domProps:{value:t.order.grant_credit.credit1.grant_num_1},on:{input:function(r){r.target.composing||t.$set(t.order.grant_credit.credit1,"grant_num_1",r.target.value)}}}),e("span",[t._v("积分")])])])])],1)]:t._e(),t._v(" "),2==t.order.grant_credit.credit1.grant_type?[e("van-cell-group",[e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("固定比例")])]),t._v(" "),e("van-cell",[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("按1元赠送")]),t._v(" "),e("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[e("div",{staticClass:"input-unit"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.order.grant_credit.credit1.grant_num_2,expression:"order.grant_credit.credit1.grant_num_2"}],attrs:{type:"text"},domProps:{value:t.order.grant_credit.credit1.grant_num_2},on:{input:function(r){r.target.composing||t.$set(t.order.grant_credit.credit1,"grant_num_2",r.target.value)}}}),e("span",[t._v("积分的比例赠送")])])])])],1)]:t._e()],2)]),t._v(" "),t.showPreLoading?e("iloading"):t._e()],1)},staticRenderFns:[]};var d=e("VU/8")(o,c,!1,function(t){e("uahv")},null,null);r.default=d.exports},uahv:function(t,r){}});
//# sourceMappingURL=47.e7f2bc22dc79a0b3150d.js.map