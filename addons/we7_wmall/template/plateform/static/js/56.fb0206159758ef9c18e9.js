webpackJsonp([56],{"6sk5":function(t,i){},bIAQ:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Cz8s"),a=s("deIj"),o={data:function(){return{records:{page:1,psize:15,loading:!1,finished:!1,empty:!1,data:[]},isRefresh:!1,showPreLoading:!0,confirmDialog:!1,code:"",filter:{items:{status:"0"}}}},components:{publicHeader:e.a},methods:{onLoad:function(t){Object(a.b)({vue:this,force:t,url:"plateform/creditshop/order/order"})},onPullDownRefresh:function(){this.onLoad(!0)},onChangeHandle:function(t,i){var s=this;s.util.jspost({url:"plateform/creditshop/order/handle",data:{id:t.id},confirm:"确定更改订单状态为已处理吗？",success:function(){s.records.data[i].status=2}})},onToggleStatus:function(t){t=parseInt(t),this.filter.items.status!=t&&(this.filter.items.status=t)},onCodeConfirm:function(){var t=this;t.code?Object(a.c)({vue:t,url:"plateform/creditshop/order/confirm",data:{code:t.code},redirect:"refresh",message:"核销成功",fail:function(i){t.util.$toast(i)}}):t.util.$toast("请输入核销码")}},mounted:function(){this.onLoad()},watch:{filter:{handler:function(t,i){this.onLoad(!0)},deep:!0}}},r={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"creditshop-order"}},[s("public-header",{attrs:{title:"积分商城订单"}},[s("div",{staticClass:"flex",attrs:{slot:"right"},slot:"right"},[s("i",{staticClass:"icon icon-edit",on:{click:function(i){t.confirmDialog=!0}}})])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"wrap-search wrap-search-input"},[s("div",{staticClass:"tab-group flex-lr border-1px-b"},[s("div",{staticClass:"tab-item",class:{active:0==t.filter.items.status},on:{click:function(i){t.onToggleStatus(0)}}},[t._v("全部")]),t._v(" "),s("div",{staticClass:"tab-item",class:{active:2==t.filter.items.status},on:{click:function(i){t.onToggleStatus(2)}}},[t._v("已处理")]),t._v(" "),s("div",{staticClass:"tab-item",class:{active:1==t.filter.items.status},on:{click:function(i){t.onToggleStatus(1)}}},[t._v("未处理")])]),t._v(" "),s("van-search",{attrs:{placeholder:"请输入用户昵称/UID"},model:{value:t.filter.items.keyword,callback:function(i){t.$set(t.filter.items,"keyword",i)},expression:"filter.items.keyword"}})],1),t._v(" "),s("van-pull-refresh",{on:{refresh:function(i){t.onPullDownRefresh()}},model:{value:t.isRefresh,callback:function(i){t.isRefresh=i},expression:"isRefresh"}},[t.records.empty?s("div",{staticClass:"no-data"},[s("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),s("p",[t._v("没有符合条件的数据!")])]):s("van-list",{staticClass:"order-list",attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.records.loading,callback:function(i){t.$set(t.records,"loading",i)},expression:"records.loading"}},[t._l(t.records.data,function(i,e){return s("div",{key:i.id,staticClass:"order-item"},[s("router-link",{staticClass:"order-title flex-lr",attrs:{tag:"div",to:t.util.getUrl({path:"/pages/plugin/creditshop/detail",query:{id:i.id}})}},[s("div",{staticClass:"title flex"},[s("div",{staticClass:"title-img"},[s("img",{attrs:{src:i.avatar,alt:""}})]),t._v(" "),s("div",{staticClass:"title-name"},[t._v(t._s(i.nickname))]),t._v(" "),"goods"==i.goods_type?s("div",{staticClass:"font-14 c-gray padding-10-r"},[t._v(t._s(i.title)+" "),s("div",{staticClass:"gift-type itag itag-danger"},[t._v("商品")])]):"redpacket"==i.goods_type?s("div",{staticClass:"font-14 c-gray padding-10-r"},[t._v(t._s(i.title)+" "),s("div",{staticClass:"gift-type itag itag-danger"},[t._v("红包")])]):"credit2"==i.goods_type?s("div",{staticClass:"font-14 c-gray padding-10-r"},[t._v(t._s(i.title)+" "),s("div",{staticClass:"gift-type itag itag-danger"},[t._v("余额")])]):t._e()]),t._v(" "),1==i.status?s("div",{staticClass:"itag itag-danger"},[t._v("未处理")]):s("div",{staticClass:"itag itag-primary"},[t._v("已处理")])]),t._v(" "),s("router-link",{staticClass:"order-detail border-1px-t",attrs:{tag:"div",to:t.util.getUrl({path:"/pages/plugin/creditshop/detail",query:{id:i.id}})}},[s("div",{staticClass:"order-info flex"},[s("div",[t._v("兑换码：")]),t._v(" "),s("div",{staticClass:"c-danger"},[t._v(t._s(i.code))])]),t._v(" "),s("div",{staticClass:"order-info flex"},[s("div",[t._v("支付方式：")]),t._v(" "),s("div",[t._v(t._s(i.use_credit1)+"积分 "),i.use_credit2>0?[t._v("+"+t._s(i.use_credit2)+"元")]:t._e()],2)]),t._v(" "),"goods"==i.goods_type?[s("div",{staticClass:"order-info flex"},[s("div",[t._v("收件人：")]),t._v(" "),s("div",[t._v(t._s(i.username))])]),t._v(" "),s("div",{staticClass:"order-info flex"},[s("div",[t._v("手机号：")]),t._v(" "),s("div",{staticClass:"c-info",on:{click:function(s){t.util.jsUrl("tel:"+i.mobile)}}},[t._v(t._s(i.mobile)+" "),s("i",{staticClass:"icon icon-phone2"})])])]:t._e(),t._v(" "),s("div",{staticClass:"order-info flex"},[s("div",[t._v("兑换时间：")]),t._v(" "),s("div",[t._v(t._s(i.addtime_cn))])])],2),t._v(" "),"goods"==i.goods_type&&1==i.is_pay&&1==i.status?s("div",{staticClass:"border-1px-t btn-group"},[s("div",{staticClass:"btn-item bg-default",on:{click:function(s){t.onChangeHandle(i,e)}}},[t._v("设为已处理")])]):t._e()],1)}),t._v(" "),t.records.finished?s("div",{staticClass:"loaded"},[s("div",{staticClass:"loaded-tips"},[t._v("没有更多了")])]):t._e()],2)],1)],1),t._v(" "),s("van-dialog",{attrs:{title:"核销码核销","show-cancel-button":""},on:{confirm:t.onCodeConfirm},model:{value:t.confirmDialog,callback:function(i){t.confirmDialog=i},expression:"confirmDialog"}},[s("van-field",{attrs:{placeholder:"请输入6位核销码","input-align":"center"},model:{value:t.code,callback:function(i){t.code=i},expression:"code"}})],1),t._v(" "),t.showPreLoading?s("iloading"):t._e()],1)},staticRenderFns:[]};var d=s("VU/8")(o,r,!1,function(t){s("6sk5")},null,null);i.default=d.exports}});