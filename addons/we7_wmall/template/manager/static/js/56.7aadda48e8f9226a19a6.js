webpackJsonp([56],{"WcB/":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=a("Cz8s"),e=a("deIj"),i={components:{publicHeader:o.a},data:function(){return{showPreLoading:!0,isRefresh:!1,goodsAll:{},goodsItem:[],categorys:{},category_goodsNum:{},selectCategoryId:0,selectCategory:{}}},methods:{onLoad:function(t){var s=this;s.goodsAll[s.selectCategoryId]?this.goodsItem=s.goodsAll[s.selectCategoryId]:Object(e.a)({vue:this,url:"manage/goods/index/list",data:{cid:t},success:function(t){s.isRefresh=!1,s.goodsItem=t.goods,s.selectCategoryId=t.cid,s.goodsAll[s.selectCategoryId]=t.goods,s.categorys=t.categorys,s.selectCategory=t.categorys[s.selectCategoryId],s.selectCategory.goods_num=t.goods_num,s.category_goodsNum[s.selectCategoryId]=t.goods_num}})},onToggleCategory:function(t){this.selectCategoryId=t,this.selectCategory=this.categorys[t],this.selectCategory.goods_num=this.category_goodsNum[t],this.onLoad(t)},onPullDownRefresh:function(){delete this.goodsAll[this.selectCategoryId],this.onLoad(this.selectCategoryId)},onChangeStatus:function(t,s,a){var o=this,e=s.id,i=s.cid;if("status"==t)var l=1==s.status?0:1,n={url:"manage/goods/index/status",confirm:1==s.status?"确定下架此商品吗?":"确定上架此商品吗?",data:{id:e,value:l},success:function(t){o.util.$toast(t),o.goodsAll[i][a].status=l,o.goodsItem=o.goodsAll[i]}};else if("total"==t)n={url:"manage/goods/index/turncate",confirm:"确定设置已售罄吗?",data:{id:e},success:function(t){o.util.$toast(t),o.goodsAll[i][a].total=0,o.goodsItem=o.goodsAll[i]}};o.util.jspost(n)}},mounted:function(){this.onLoad()}},l={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"goods-list"}},[a("public-header",{attrs:{title:"全部商品"}}),t._v(" "),a("div",{staticClass:"content"},[t.categorys&&t.categorys[t.selectCategoryId]?a("van-row",{staticClass:"wh-100"},[a("van-col",{staticClass:"wh-100 tag-list",attrs:{span:"6"}},t._l(t.categorys,function(s,o){return a("div",{key:"c"+o,staticClass:"tag-item van-hairline--bottom",class:{active:t.selectCategoryId==o}},[a("div",{staticClass:"tag-inner",on:{click:function(a){t.onToggleCategory(s.id)}}},[t._v(t._s(s.title))])])})),t._v(" "),a("van-col",{staticClass:"wh-100 bg-default goods-wrap",attrs:{span:"18"}},[a("van-pull-refresh",{on:{refresh:function(s){t.onPullDownRefresh()}},model:{value:t.isRefresh,callback:function(s){t.isRefresh=s},expression:"isRefresh"}},[a("div",{staticClass:"category-title"},[t._v(t._s(t.selectCategory.title)+"("+t._s(t.selectCategory.goods_num)+")")]),t._v(" "),a("div",{staticClass:"goods-list padding-10-lr"},[t._l(t.goodsItem,function(s,o){return a("div",{key:o,staticClass:"goods-item van-hairline--bottom"},[a("div",{staticClass:"goods-info flex-lr"},[a("div",{staticClass:"goods-thumb"},[s.label?a("div",{staticClass:"hot"},[t._v(t._s(s.label))]):t._e(),t._v(" "),1!=s.status?a("div",{staticClass:"status"},[t._v("已下架")]):t._e(),t._v(" "),a("img",{staticClass:"wh-100",attrs:{src:s.thumb,alt:""}})]),t._v(" "),a("div",{staticClass:"flex-tb-left info-inner"},[a("div",{staticClass:"font-bold w-100 ellipsis font-15"},[t._v(t._s(s.title))]),t._v(" "),a("div",{staticClass:"c-gray flex font-13"},[a("span",[t._v("已售: "+t._s(s.sailed))]),t._v(" "),-1==s.total?a("div",{staticClass:"sailed-tip"},[t._v("不限库存")]):t._e(),t._v(" "),a("span",{staticClass:"margin-10-l"},[t._v("库存: "+t._s(s.total))]),t._v(" "),s.price<s.old_price?a("div",{staticClass:"sail-limit"},[t._v("限时售卖")]):t._e()]),t._v(" "),a("div",{staticClass:"flex font-13"},[a("span",{staticClass:"c-info"},[t._v("外卖: "),a("span",{staticClass:"font-bold"},[t._v("¥"+t._s(s.price))])]),t._v(" "),a("span",{staticClass:"c-danger margin-10-l"},[t._v("店内: "),a("span",{staticClass:"font-bold"},[t._v("¥"+t._s(s.ts_price))])])])])]),t._v(" "),a("div",{staticClass:"btn-group"},[0!=s.total?a("div",{staticClass:"btn-item",on:{click:function(a){t.onChangeStatus("total",s,o)}}},[t._v("售罄")]):t._e(),t._v(" "),a("router-link",{staticClass:"btn-item",attrs:{tag:"div",to:t.util.getUrl({path:"pages/goods/post",query:{id:s.id}})}},[t._v("编辑")]),t._v(" "),a("div",{staticClass:"btn-item",on:{click:function(a){t.onChangeStatus("status",s,o)}}},[t._v(t._s(1==s.status?"下架":"上架"))])],1)])}),t._v(" "),0==t.goodsItem.length?a("div",{staticClass:"no-data"},[a("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),a("p",[t._v("暂无商品")])]):a("div",{staticClass:"loaded"},[a("div",{staticClass:"loaded-tips white"},[t._v("我是有底线的")])])],2)])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"action-bottom van-hairline--top"},[a("router-link",{staticClass:"action-item",attrs:{tag:"div",to:t.util.getUrl({path:"pages/category/index"})}},[a("i",{staticClass:"icon icon-list c-info"}),t._v("\n\t\t\t\t管理分类\n\t\t\t")]),t._v(" "),a("router-link",{staticClass:"action-item van-hairline--left",attrs:{tag:"div",to:t.util.getUrl({path:"pages/goods/post"})}},[a("i",{staticClass:"icon icon-roundadd c-info"}),t._v("\n\t\t\t\t新建商品\n\t\t\t")])],1)],1),t._v(" "),t.showPreLoading?a("iloading"):t._e()],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(t){a("wQ9A")},null,null);s.default=n.exports},wQ9A:function(t,s){}});
//# sourceMappingURL=56.7aadda48e8f9226a19a6.js.map