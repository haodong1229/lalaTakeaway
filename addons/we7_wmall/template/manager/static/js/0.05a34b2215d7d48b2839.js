webpackJsonp([0],{"+CBI":function(e,t,s){"use strict";var a=s("woOf"),n=s.n(a),r={props:{textOpen:{type:String,default:"开启"},textClose:{type:String,default:"关闭"},conditionOpen:{default:1},conditionClose:{default:0},value:0,keys:{type:String,default:""},type:{type:String,default:""},extra:{type:Object,default:function(){return{}}}},methods:{onClick:function(){var e="";this.value==this.conditionOpen?e=this.conditionClose:this.value==this.conditionClose&&(e=this.conditionOpen);var t={keys:this.keys,value:e,type:this.type};t=n()(t,this.extra),this.$emit("change",t)}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"iswitch",class:{close:e.value==e.conditionClose},on:{click:e.onClick}},[s("div",{staticClass:"block",class:{open:e.value==e.conditionOpen}}),e._v(" "),s("div",{staticClass:"text"},[s("div",{staticClass:"option",class:{selected:e.value==e.conditionOpen}},[e._v(e._s(e.textOpen))]),e._v(" "),s("div",{staticClass:"option",class:{selected:e.value==e.conditionClose}},[e._v(e._s(e.textClose))])])])},staticRenderFns:[]};var o=s("VU/8")(r,i,!1,function(e){s("4po/")},null,null);t.a=o.exports},"+TmT":function(e,t,s){"use strict";var a=s("mtWM"),n=s.n(a),r={name:"Uploader",props:{value:{type:Array,default:function(){return[]}},max:{type:Number|String,default:0},uploadOptions:{type:Object,default:function(){return{type:"h5",dock:"utility/upload"}}}},methods:{onDel:function(e){this.value.splice(e,1),this.$emit("delete",this.value)},onUpload:function(e,t){var s=this;if("h5"==s.uploadOptions.type){if(!t)return;var a=t.target;if(a.files&&a.files.length>0){var r=s.util.getFullUrl("c=utility&a=file&do=upload&type=image&thumb=0");s.$toast.loading({message:"上传中",duration:0});for(var i=0;i<a.files.length;i++){var o=new FormData;o.append("file",a.files[i]),n.a.post(r,o).then(function(t){s.$toast.clear();var a=t.data;a.errno?a.message?alert("上传文件失败, 具体原因:"+a.message):alert("上传文件失败, 具体原因:"+a.error.message):a.url&&a.filename&&(e>0?s.value[e]={url:a.url,filename:a.filename}:s.value.push({url:a.url,filename:a.filename}),console.log(s.value),s.$emit("onGetUrl",s.value))})}}}}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"uploader"},[s("van-row",{staticClass:"weui-uploader__files",attrs:{gutter:"10"}},[e._l(e.value,function(t,a){return s("van-col",{key:a,attrs:{span:"6"}},[s("div",{staticClass:"weui-uploader__file",style:{backgroundImage:"url("+t.url+")"}},[s("i",{staticClass:"icon icon-close",on:{click:function(t){e.onDel(a)}}})])])}),e._v(" "),e.max>0&&e.value.length<e.max||e.max<=0?s("van-col",{staticClass:"weui-uploader__input-box",attrs:{span:"6"}},[s("div",{staticClass:"weui-uploader__file"},["h5"==e.uploadOptions.type?s("input",{staticClass:"weui-uploader__input",attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:function(t){e.onUpload(-1,t)}}}):e._e(),e._v(" "),e._t("img",[s("i",{staticClass:"icon icon-camerafill"})])],2)]):e._e()],2)],1)},staticRenderFns:[]};var o=s("VU/8")(r,i,!1,function(e){s("kMrQ")},null,null);t.a=o.exports},"3rdK":function(e,t){},"4po/":function(e,t){},"5zde":function(e,t,s){s("zQR9"),s("qyJz"),e.exports=s("FeBl").Array.from},Cz8s:function(e,t,s){"use strict";var a={name:"PublicHeader",props:{title:String},data:function(){return{back:!1,headerstyle:{background:"#33aafc",color:"#fff"}}},methods:{onClickLeft:function(){this.back&&this.$router.back(-1)}},mounted:function(){window.history.length>1&&(this.back=!0)}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"public-header"}},[t("van-nav-bar",{style:{background:this.headerstyle.background,color:this.headerstyle.color},attrs:{title:this.title,"left-arrow":this.back},on:{"click-left":this.onClickLeft}},[t("div",{attrs:{slot:"right"},slot:"right"},[this._t("right")],2)])],1)},staticRenderFns:[]};var r=s("VU/8")(a,n,!1,function(e){s("3rdK")},null,null);t.a=r.exports},Gu7T:function(e,t,s){"use strict";t.__esModule=!0;var a,n=s("c/Tr"),r=(a=n)&&a.__esModule?a:{default:a};t.default=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return(0,r.default)(e)}},"c/Tr":function(e,t,s){e.exports={default:s("5zde"),__esModule:!0}},deIj:function(e,t,s){"use strict";s.d(t,"a",function(){return l}),s.d(t,"c",function(){return d}),s.d(t,"b",function(){return f});var a=s("Gu7T"),n=s.n(a),r=s("mvHQ"),i=s.n(r),o=s("woOf"),u=s.n(o),c=s("Fd2+");function l(e){return e.vue.util.request({url:e.url,data:e.data}).then(function(t){e.vue.showPreLoading&&(e.vue.showPreLoading=!1);var s=t.data.message;return s.errno?e.fail&&"function"==typeof e.fail?(e.fail(s),!1):(e.vue.util.$toast(s.message),!1):(s=s.message,e.data&&1==e.data.menufooter&&(e.vue.menufooter=window.menufooter),e.autoAssign&&e.variable&&s[e.variable]&&(e.vue[e.variable]=e.vue.util.extend(e.vue[e.variable],s[e.variable])),!e.success||"function"!=typeof e.success||(e.success(s),!1))}),!0}function d(e){var t=function(){e.vue.util.request({method:"post",url:e.url,data:e.data}).then(function(t){var s=t.data.message;return s.errno?e.fail&&"function"==typeof e.fail?(e.fail(s),!1):(e.vue.util.$toast(s.message),!1):(s=s.message,e.success&&"function"==typeof e.success?(e.success(s),!1):(e.redirect||(e.redirect="refresh"),e.message||(e.message="保存成功"),e.vue.util.$toast(e.message,e.redirect,1e3),!0))})};e.confirm?c.a.confirm({title:"温馨提示",message:e.confirm}).then(function(){t()}):t()}function f(e){if(e.force&&(e.vue.records={page:1,psize:15,loading:!0,finished:!1,empty:!1,data:[]}),e.vue.records.finished)return!1;var t={page:e.vue.records.page,psize:e.vue.records.psize};return e.data&&(t=u()(e.data,t)),e.vue.filter&&(t.filter=i()(e.vue.filter.items)),e.vue.util.request({url:e.url,data:t}).then(function(t){e.vue.showPreLoading&&(e.vue.showPreLoading=!1);var s=t.data.message;if(s.errno)return e.vue.util.$toast(s.message),!1;if(e.data&&1==e.data.menufooter&&(e.vue.menufooter=window.menufooter),e.recordsName)var a=s.message[e.recordsName];else a=s.message.records;return e.vue.records.data=[].concat(n()(e.vue.records.data),n()(a)),e.vue.records.data.length||(e.vue.records.empty=!0),a&&a.length<e.vue.records.psize&&(e.vue.records.finished=!0),e.vue.records.page++,e.vue.records.loading=!1,e.vue.isRefresh=!1,s.message.filter&&(e.vue.condition.items=s.message.filter),e.success&&"function"==typeof e.success?(e.success(s.message),!1):void 0}),!0}},fBQ2:function(e,t,s){"use strict";var a=s("evD5"),n=s("X8DO");e.exports=function(e,t,s){t in e?a.f(e,t,n(0,s)):e[t]=s}},"jDe/":function(e,t){},kMrQ:function(e,t){},mzkE:function(e,t,s){"use strict";var a={name:"PublicFooter",props:{showPreLoading:{type:Boolean||Number},menufooter:Object},data:function(){return{active:0}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"public-footer"}},[s("van-tabbar",[s("van-tabbar-item",{attrs:{to:e.util.getUrl({path:"/pages/order/index"})},scopedSlots:e._u([{key:"icon",fn:function(t){return s("div",{staticClass:"icon icon-order font-20",style:{color:e.util.isMenuActive("/pages/order/index")?"#33aafc":"#666"}})}}])},[s("span",{style:{color:e.util.isMenuActive("/pages/order/index")?"#33aafc":"#666"}},[e._v("外卖")])]),e._v(" "),s("van-tabbar-item",{attrs:{to:e.util.getUrl({path:"/pages/order/tangshi/index"})},scopedSlots:e._u([{key:"icon",fn:function(t){return s("div",{staticClass:"icon icon-shop font-20",style:{color:e.util.isMenuActive("/pages/order/tangshi/index")?"#33aafc":"#666"}})}}])},[s("span",{style:{color:e.util.isMenuActive("/pages/order/tangshi/index")?"#33aafc":"#666"}},[e._v("店内")])]),e._v(" "),s("van-tabbar-item",{attrs:{to:e.util.getUrl({path:"/pages/shop/home"})},scopedSlots:e._u([{key:"icon",fn:function(t){return s("div",{staticClass:"icon icon-apps font-20",style:{color:e.util.isMenuActive("/pages/shop/home")?"#33aafc":"#666"}})}}])},[s("span",{style:{color:e.util.isMenuActive("/pages/shop/home")?"#33aafc":"#666"}},[e._v("运营")])]),e._v(" "),s("van-tabbar-item",{attrs:{to:e.util.getUrl({path:"/pages/shop/setting"})},scopedSlots:e._u([{key:"icon",fn:function(t){return s("div",{staticClass:"icon icon-settings font-20",style:{color:e.util.isMenuActive("/pages/shop/setting")?"#33aafc":"#666"}})}}])},[s("span",{style:{color:e.util.isMenuActive("/pages/shop/setting")?"#33aafc":"#666"}},[e._v("设置")])])],1)],1)},staticRenderFns:[]};var r=s("VU/8")(a,n,!1,function(e){s("jDe/")},null,null);t.a=r.exports},nZVv:function(e,t,s){"use strict";s.d(t,"a",function(){return u}),s.d(t,"b",function(){return c});var a=s("woOf"),n=s.n(a),r=s("EuEE"),i=s("YaEn");function o(e){return{handle:{tip:"确定接单吗",success_status:2},notify_deliveryer_collect:{tip:"确定通知配送员抢单吗",success_status:3},direct_deliveryer:{tip:"",success_status:3},end:{tip:"确定完成订单吗",success_status:5},cancel:{tip:"确定取消订单吗",success_status:6},cancel_refund:{tip:"确定取消订单并退款吗",success_status:6},delivery_ing:{tip:"确定设置为配送中吗",success_status:4},reply:{tip:"",success_status:0},pay_status:{tip:"确定设为已支付吗",success_status:0}}[e]}function u(e){var t=e.order,s=e.type;if("print"!=s){var a=o(s),u=a.tip,c=a.success_status;if("cancel"==s||"cancel_refund"==s||"direct_deliveryer"==s||"reply"==s)i.a.push(r.a.getUrl({path:"/pages/order/op",query:{order_id:t.id,type:s,tip:u,order_status:t.status}}));else{l={url:"manage/order/takeout/status",data:{id:t.id,type:s},confirm:u,success:function(t){if(r.a.$toast(t),"detail"==e.from&&c)e.vue.order.status=c,e.vue.order=n()({},e.vue.order);else{if("notify_deliveryer_collect"==s&&3==e.vue.filter.items.status)return;-1!=["handle","end","notify_deliveryer_collect","delivery_ing"].indexOf(s)&&e.index>=0&&("search"==e.from?e.vue.records.data[e.index].status=c:e.vue.records.data.splice(e.index,1))}}};r.a.jspost(l)}}else{var l={url:"manage/order/takeout/print",data:{id:t.id},confirm:"确定打印订单吗",success:function(t){r.a.$toast(t),"detail"==e.from&&c?(e.vue.order.print_nums++,e.vue.order=n()({},e.vue.order)):e.vue.records.data[e.index].print_nums++}};r.a.jspost(l)}}function c(e){var t=e.order,s=e.type,a=o(s),i=a.tip,u=a.success_status,c="manage/order/takeout/status";"cancel"==s||"cancel_refund"==s?c="manage/order/tangshi/cancel":"pay_status"==s&&(c="manage/order/tangshi/pay_status");var l={url:c,data:{id:t.id,type:s},confirm:i,success:function(t){if(r.a.$toast(t),"detail"==e.from&&u)e.vue.order.status=u,e.vue.order=n()({},e.vue.order);else{if("pay_status"==s)return void(e.vue.records.data[e.index].is_pay=1);-1!=["handle","end","cancel","cancel_refund"].indexOf(s)&&e.index>=0&&e.vue.records.data.splice(e.index,1)}}};r.a.jspost(l)}},qyJz:function(e,t,s){"use strict";var a=s("+ZMJ"),n=s("kM2E"),r=s("sB3e"),i=s("msXi"),o=s("Mhyx"),u=s("QRG4"),c=s("fBQ2"),l=s("3fs2");n(n.S+n.F*!s("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,s,n,d,f=r(e),v="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,h=void 0!==g,m=0,y=l(f);if(h&&(g=a(g,p>2?arguments[2]:void 0,2)),void 0==y||v==Array&&o(y))for(s=new v(t=u(f.length));t>m;m++)c(s,m,h?g(f[m],m):f[m]);else for(d=y.call(f),s=new v;!(n=d.next()).done;m++)c(s,m,h?i(d,g,[n.value,m],!0):n.value);return s.length=m,s}})}});
//# sourceMappingURL=0.05a34b2215d7d48b2839.js.map