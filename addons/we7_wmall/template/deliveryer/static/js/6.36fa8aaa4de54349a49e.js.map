{"version":3,"sources":["webpack:///src/pages/order/takeout.vue","webpack:///./src/pages/order/takeout.vue?b011","webpack:///./src/pages/order/takeout.vue","webpack:///./src/pages/order/controller/order.js"],"names":["components","publicHeader","header","publicFooter","footer","countDown","data","filter","items","status","isRefresh","showPreLoading","records","page","psize","loading","finished","empty","deliveryer","can_collect_order","config","failedTips","show","type","tips","btnText","link","position","methods","onToggleStatus","value","parseInt","this","onLoad","force","that","Object","funcCommon","vue","url","recordsName","success","result","fail","util","isDlala","window","apiready","startLocation","onChangeOrderStatus","index","order","from","onDetail","id","$router","push","getUrl","path","query","$toast","onPullDownRefresh","created","$route","mounted","getStorage","idtoken","api","getPrefs","sync","key","setStorage","setInterval","auto_refresh","imap","icloudapi","order_takeout","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","class","active","on","click","$event","refresh","model","callback","$$v","expression","src","alt","work_status","perm_takeout","offset","immediate-check","load","$set","_l","item","_s","serial_sn","store2deliveryer_distance","store2user_distance","plateform_deliveryer_fee","delivery_collect_type_cn","_e","delivery_status","delivery_overtime","endTime","delivery_overtime_start","startTime","store","address","note","addtime_cn","delivery_day","delivery_time","transfer_delivery_status","jsTel","mobile","telephone","is_pay","pay_type","staticRenderFns","Component","__webpack_require__","normalizeComponent","takeout","ssrContext","__webpack_exports__","changeOrderStatus","options","typeInfo","delivery_assign","tip","success_status","direct_transfer_refuse","reply","direct_transfer_agree","delivery_instore","delivery_takegoods","delivery_success","wx_notice","orderStatusChangeTips","params","confirm","message","__WEBPACK_IMPORTED_MODULE_1__config_util_js__","deliveryer_id","transfer_deliveryer_id","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","splice","indexOf","jspost","__WEBPACK_IMPORTED_MODULE_2__router__","order_id","order_status"],"mappings":"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","file":"static/js/6.36fa8aaa4de54349a49e.js","sourcesContent":["<template>\r\n\t<div id=\"takeout-list\">\r\n\t\t<public-header title=\"订单列表\"></public-header>\r\n\t\t<public-footer :showPreLoading=\"showPreLoading\"></public-footer>\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class=\"wrap-search\">\r\n\t\t\t\t<div class=\"tab-group flex-lr\">\r\n\t\t\t\t\t<div class=\"tab-item\" :class=\"{active: filter.items.status == 3}\" @click=\"onToggleStatus(3)\">待抢</div>\r\n\t\t\t\t\t<div class=\"tab-item\" :class=\"{active: filter.items.status == 7}\" @click=\"onToggleStatus(7)\">待取货</div>\r\n\t\t\t\t\t<div class=\"tab-item\" :class=\"{active: filter.items.status == 4}\" @click=\"onToggleStatus(4)\">配送中</div>\r\n\t\t\t\t\t<div class=\"tab-item\" :class=\"{active: filter.items.status == 5}\" @click=\"onToggleStatus(5)\">已完成</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<van-pull-refresh v-model=\"isRefresh\" @refresh=\"onPullDownRefresh()\">\r\n\t\t\t\t<van-list\r\n\t\t\t\t\tv-model=\"records.loading\"\r\n\t\t\t\t\t:finished=\"records.finished\"\r\n\t\t\t\t\t@load=\"onLoad\"\r\n\t\t\t\t\t:offset=\"100\"\r\n\t\t\t\t\t:immediate-check=\"false\"\r\n\t\t\t\t\tv-if=\"!records.empty\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"order-item\" v-for=\"(item, index) in records.data\" :key=\"item.id\">\r\n\t\t\t\t\t\t<div class=\"van-hairline--bottom flex-lr padding-15-tb padding-10-lr\" @click=\"onDetail(item.id)\">\r\n\t\t\t\t\t\t\t<div class=\"flex\">\r\n\t\t\t\t\t\t\t\t<span class=\"c-primary font-500 font-18\">#{{item.serial_sn}}</span>\r\n\t\t\t\t\t\t\t\t<div class=\"distance flex\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"img-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"w-100\" src=\"static/img/start.png\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"text\">-{{item.store2deliveryer_distance}}km-</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"img-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"w-100\" src=\"static/img/ds.png\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"text\">-{{item.store2user_distance}}km-</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"img-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<img class=\"w-100\" src=\"static/img/end.png\" alt=\"\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span class=\"c-danger font-15 font-500\">¥ {{item.plateform_deliveryer_fee}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"padding-10-lr margin-15-t\">\r\n\t\t\t\t\t\t\t<div class=\"flex-lr\">\r\n\t\t\t\t\t\t\t\t<ul class=\"order-tags\">\r\n\t\t\t\t\t\t\t\t\t<li class=\"handle-type\">{{item.delivery_collect_type_cn}}</li>\r\n\t\t\t\t\t\t\t\t\t<li v-if=\"0\">保温服务</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t<div class=\"c-danger flex\" v-if=\"item.status == 4 && item.delivery_status != 3\">\r\n\t\t\t\t\t\t\t\t\t<template v-if=\"item.delivery_overtime > 0\">\r\n\t\t\t\t\t\t\t\t\t\t距超时<count-down :endTime=\"item.delivery_overtime\" class=\"c-danger\"></count-down>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t<template v-else-if=\"item.delivery_overtime_start > 0\">\r\n\t\t\t\t\t\t\t\t\t\t已超时<count-down :startTime=\"item.delivery_overtime_start\" class=\"c-danger\"></count-down>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul class=\"address padding-10-lr\" @click=\"onDetail(item.id)\">\r\n\t\t\t\t\t\t\t<li class=\"flex-lr margin-15-t\">\r\n\t\t\t\t\t\t\t\t<span class=\"c-info font-15\">取:</span>\r\n\t\t\t\t\t\t\t\t<ul class=\"address-text\">\r\n\t\t\t\t\t\t\t\t\t<li class=\"font-15 font-500\">{{item.store.title}}</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"c-gray margin-5-t\">{{item.store.address}}</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"flex-lr margin-15-t\">\r\n\t\t\t\t\t\t\t\t<span class=\"c-primary font-15\">送:</span>\r\n\t\t\t\t\t\t\t\t<ul class=\"address-text\">\r\n\t\t\t\t\t\t\t\t\t<li class=\"font-15 font-500 \">{{item.address}}</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<div class=\"note\" v-if=\"item.note\">\r\n\t\t\t\t\t\t\t<div class=\"note-title\">备注:</div>\r\n\t\t\t\t\t\t\t<div class=\"note-text\">{{item.note}}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ul class=\"time padding-10-lr margin-15-t flex-lr\">\r\n\t\t\t\t\t\t\t<li>{{item.addtime_cn}}下单</li>\r\n\t\t\t\t\t\t\t<li>配送 {{item.delivery_day}} {{item.delivery_time}}</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<ul class=\"btn-group margin-15-t padding-10-lr flex-lr\">\r\n\t\t\t\t\t\t\t<template v-if=\"item.delivery_status == 3\">\r\n\t\t\t\t\t\t\t\t<li class=\"btn-item bg-warning\" @click=\"onChangeOrderStatus(index, 'delivery_assign')\">抢单</li>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-if=\"item.delivery_status == 4 || item.delivery_status == 7 || item.delivery_status == 8\">\r\n\t\t\t\t\t\t\t\t<template v-if=\"item.transfer_delivery_status == 1\">\r\n\t\t\t\t\t\t\t\t\t<li class=\"btn-item bg-danger\" @click=\"onChangeOrderStatus(index, 'direct_transfer_refuse')\">拒绝转单</li>\r\n\t\t\t\t\t\t\t\t\t<li class=\"btn-item bg-primary\" @click=\"onChangeOrderStatus(index, 'direct_transfer_agree')\">接受转单</li>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t<template v-if=\"item.delivery_status == 4\">\r\n\t\t\t\t\t\t\t\t\t\t<li class=\"btn-item bg-warning\" v-if=\"item.mobile\" @click=\"util.jsTel(item.mobile)\">联系顾客</li>\r\n\t\t\t\t\t\t\t\t\t\t<li class=\"btn-item bg-primary\" @click=\"onChangeOrderStatus(index, 'delivery_success')\">确认送达</li>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t\t<li class=\"btn-item\" v-if=\"item.store && item.store.telephone\" @click=\"util.jsTel(item.store.telephone)\">联系商家</li>\r\n\t\t\t\t\t\t\t\t\t\t<li class=\"btn-item bg-primary\" @click=\"onChangeOrderStatus(index, 'delivery_takegoods')\">确认取货</li>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<div v-if=\"item.is_pay == 1\">\r\n\t\t\t\t\t\t\t<div class=\"have-pay\" v-if=\"item.pay_type != 'delivery'\"></div>\r\n\t\t\t\t\t\t\t<div class=\"delivery-pay\" v-else-if=\"item.pay_type == 'delivery'\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</van-list>\r\n\t\t\t\t<div class=\"no-data\" v-else>\r\n\t\t\t\t\t<img src=\"static/img/order_no_con.png\" alt=\"\">\r\n\t\t\t\t\t<template v-if=\"filter.items.status == 3\">\r\n\t\t\t\t\t\t<template v-if=\"deliveryer.work_status == 1\">\r\n\t\t\t\t\t\t\t<template v-if=\"deliveryer.perm_takeout > 0\">\r\n\t\t\t\t\t\t\t\t<template v-if=\"!can_collect_order\">\r\n\t\t\t\t\t\t\t\t\t<p >当前调度模式不允许抢单,请等待管理员或系统派单</p>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t<p>暂无待抢的订单</p>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t<p>您没有外卖配送权限，请联系管理员</p>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<p>您当前处于收工状态,不能抢单</p>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<p>暂无符合条件的订单</p>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t</van-pull-refresh>\r\n\t\t\t<failed-tips :failedTips=\"failedTips\" v-if=\"failedTips.show\"></failed-tips>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport publicHeader from \"@/components/header\"\r\n\timport publicFooter from \"@/components/footer\"\r\n\timport countDown from \"@/components/countDown\"\r\n\timport {getRecords} from \"../../controller/funcCommon\"\r\n\timport {changeOrderStatus} from \"./controller/order.js\"\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tpublicHeader,\r\n\t\t\tpublicFooter,\r\n\t\t\tcountDown\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfilter: {\r\n\t\t\t\t\titems: {\r\n\t\t\t\t\t\tstatus: 3\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tisRefresh: false,\r\n\t\t\t\tshowPreLoading: true,\r\n\t\t\t\trecords:{\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tpsize: 15,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tfinished: false,\r\n\t\t\t\t\tempty: false,\r\n\t\t\t\t\tdata:[]\r\n\t\t\t\t},\r\n\t\t\t\tdeliveryer: {},\r\n\t\t\t\tcan_collect_order: false,\r\n\t\t\t\tconfig: {},\r\n\t\t\t\tfailedTips: {\r\n\t\t\t\t\tshow: false,\r\n\t\t\t\t\ttype: 'message',\r\n\t\t\t\t\ttips: '您没有外卖单的配送权限，请联系平台管理员',\r\n\t\t\t\t\tbtnText: '',\r\n\t\t\t\t\tlink: '',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonToggleStatus(value){\r\n\t\t\t\tvalue = parseInt(value);\r\n\t\t\t\tif(this.filter.items.status == value) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.filter.items.status = value;\r\n\t\t\t\tthis.onLoad(true);\r\n\t\t\t},\r\n\t\t\tonLoad(force){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tgetRecords({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\tforce: force,\r\n\t\t\t\t\turl: 'delivery/order/takeout/list',\r\n\t\t\t\t\trecordsName: 'orders',\r\n\t\t\t\t\tsuccess: function(result) {\r\n\t\t\t\t\t\tthat.deliveryer = result.deliveryer;\r\n\t\t\t\t\t\tthat.can_collect_order = result.can_collect_order;\r\n\t\t\t\t\t\tthat.config = result.config;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\tthat.failedTips.show = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(that.util.isDlala()) {\r\n\t\t\t\t\twindow.apiready = function() {\r\n\t\t\t\t\t\tthat.util.startLocation({\r\n\t\t\t\t\t\t\tvue: that\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonChangeOrderStatus(index, type) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tchangeOrderStatus({\r\n\t\t\t\t\tvue: that,\r\n\t\t\t\t\ttype: type,\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tfrom: 'list',\r\n\t\t\t\t\torder: that.records.data[index],\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tonDetail(id) {\r\n\t\t\t\tif(this.filter.items.status == 3) {\r\n\t\t\t\t\tthis.util.$toast('抢单后才能查看详情', '', 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push(this.util.getUrl({path: 'pages/order/detail', query: {id: id}}));\r\n\t\t\t},\r\n\r\n\t\t\tonPullDownRefresh() {\r\n\t\t\t\tthis.onLoad(true);\r\n\t\t\t},\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.query = this.$route.query;\r\n\t\t\tif(this.query && this.query.status) {\r\n\t\t\t\tthis.filter.items.status = this.query.status;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar that = this;\r\n\t\t\tif(!that.util.getStorage('idtoken') && that.util.isDlala()) {\r\n\t\t\t\twindow.apiready = function() {\r\n\t\t\t\t\tvar idtoken = api.getPrefs({\r\n\t\t\t\t\t\tsync: true,\r\n\t\t\t\t\t\tkey: 'idtoken'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(idtoken) {\r\n\t\t\t\t\t\tthat.util.setStorage('idtoken', idtoken);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.onLoad();\r\n\t\t\t\t\tsetInterval(function() {\r\n\t\t\t\t\t\tif(that.filter.items.status == 3 && that.config.auto_refresh == 1) {\r\n\t\t\t\t\t\t\tthat.onLoad(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 15000);\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tthat.onLoad();\r\n\t\t\t\tsetInterval(function() {\r\n\t\t\t\t\tif(that.filter.items.status == 3 && that.config.auto_refresh == 1) {\r\n\t\t\t\t\t\tthat.onLoad(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 15000);\r\n\t\t\t}\r\n\t\t\tthis.util.imap();\r\n\t\t\tthis.util.icloudapi();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#takeout-list .order-item{\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tfont-size: 14px;\r\n\t\tmargin-top: 10px;\r\n\t\tpadding-bottom: 15px;\r\n\t}\r\n\t#takeout-list .order-item:first-child{\r\n\t\tmargin-top: 0px;\r\n\t}\r\n\t#takeout-list .order-item .distance{\r\n\t\tmargin-left: 20px;\r\n\t}\r\n\t#takeout-list .order-item .distance .img-wrap{\r\n\t\twidth: 25px;\r\n\t\tfont-size: 0px;\r\n\t}\r\n\t#takeout-list .order-item .order-tags{\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: row nowrap;\r\n\t\talign-items: center;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\t#takeout-list .order-item .order-tags li{\r\n\t\tpadding: 3px 5px;\r\n\t\tborder-radius: 3px;\r\n\t\tmargin-right: 5px;\r\n\t\tcolor: #FF2D4B;\r\n\t\tborder: 1px solid #FF2D4B;\r\n\t}\r\n\t#takeout-list .order-item .order-tags .handle-type{\r\n\t\tbackground-color: #FF2D4B;\r\n\t\tcolor: #fff;\r\n\t\tfont-style: italic;\r\n\t\tpadding: 3px 7px 3px 3px;\r\n\t}\r\n\t#takeout-list .order-item .address-text{\r\n\t\tflex: 1;\r\n\t\tpadding-left: 15px;\r\n\t}\r\n\t#takeout-list .order-item .note{\r\n\t\tmargin: 15px 10px 0 10px;\r\n\t\tpadding: 10px;\r\n\t\tborder-radius: 3px;\r\n\t\tbackground-color: #DFFBF9;\r\n\t\tcolor: #16C5B6;\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t#takeout-list .order-item .note .note-text{\r\n\t\tflex: 1;\r\n\t\tpadding-left: 10px;\r\n\t\tline-height: 1.2;\r\n\t}\r\n\t#takeout-list .order-item .time li{\r\n\t\tcolor: #1AB5F5;\r\n\t\tborder: 1px solid #1AB5F5;\r\n\t\tfont-size: 12px;\r\n\t\tpadding: 2px 5px;\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\t#takeout-list .order-item .btn-group .btn-item{\r\n\t\tflex: 1;\r\n\t\theight: 44px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #189FD1;\r\n\t}\r\n\t#takeout-list .order-item .btn-group .btn-item:nth-child(2){\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t#takeout-list .order-item .have-pay{\r\n\t\tposition: absolute;\r\n\t\twidth: 100px;\r\n\t\theight: 50px;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -50px;\r\n\t\ttop: 100px;\r\n\t\tbackground: url(\"http://1.duoxunwl.com/addons/we7_wmall/static/img/have-pay.png\") no-repeat center center;\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\t#takeout-list .order-item .delivery-pay{\r\n\t\tposition: absolute;\r\n\t\twidth: 110px;\r\n\t\theight: 70px;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -50px;\r\n\t\ttop: 100px;\r\n\t\tbackground: url(\"http://1.duoxunwl.com/addons/we7_wmall/static/img/delivery-pay.png\") no-repeat center center;\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/order/takeout.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"takeout-list\"}},[_c('public-header',{attrs:{\"title\":\"订单列表\"}}),_vm._v(\" \"),_c('public-footer',{attrs:{\"showPreLoading\":_vm.showPreLoading}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"wrap-search\"},[_c('div',{staticClass:\"tab-group flex-lr\"},[_c('div',{staticClass:\"tab-item\",class:{active: _vm.filter.items.status == 3},on:{\"click\":function($event){_vm.onToggleStatus(3)}}},[_vm._v(\"待抢\")]),_vm._v(\" \"),_c('div',{staticClass:\"tab-item\",class:{active: _vm.filter.items.status == 7},on:{\"click\":function($event){_vm.onToggleStatus(7)}}},[_vm._v(\"待取货\")]),_vm._v(\" \"),_c('div',{staticClass:\"tab-item\",class:{active: _vm.filter.items.status == 4},on:{\"click\":function($event){_vm.onToggleStatus(4)}}},[_vm._v(\"配送中\")]),_vm._v(\" \"),_c('div',{staticClass:\"tab-item\",class:{active: _vm.filter.items.status == 5},on:{\"click\":function($event){_vm.onToggleStatus(5)}}},[_vm._v(\"已完成\")])])]),_vm._v(\" \"),_c('van-pull-refresh',{on:{\"refresh\":function($event){_vm.onPullDownRefresh()}},model:{value:(_vm.isRefresh),callback:function ($$v) {_vm.isRefresh=$$v},expression:\"isRefresh\"}},[(!_vm.records.empty)?_c('van-list',{attrs:{\"finished\":_vm.records.finished,\"offset\":100,\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.records.loading),callback:function ($$v) {_vm.$set(_vm.records, \"loading\", $$v)},expression:\"records.loading\"}},_vm._l((_vm.records.data),function(item,index){return _c('div',{key:item.id,staticClass:\"order-item\"},[_c('div',{staticClass:\"van-hairline--bottom flex-lr padding-15-tb padding-10-lr\",on:{\"click\":function($event){_vm.onDetail(item.id)}}},[_c('div',{staticClass:\"flex\"},[_c('span',{staticClass:\"c-primary font-500 font-18\"},[_vm._v(\"#\"+_vm._s(item.serial_sn))]),_vm._v(\" \"),_c('div',{staticClass:\"distance flex\"},[_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":\"static/img/start.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"-\"+_vm._s(item.store2deliveryer_distance)+\"km-\")]),_vm._v(\" \"),_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":\"static/img/ds.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"-\"+_vm._s(item.store2user_distance)+\"km-\")]),_vm._v(\" \"),_c('div',{staticClass:\"img-wrap\"},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":\"static/img/end.png\",\"alt\":\"\"}})])])]),_vm._v(\" \"),_c('span',{staticClass:\"c-danger font-15 font-500\"},[_vm._v(\"¥ \"+_vm._s(item.plateform_deliveryer_fee))])]),_vm._v(\" \"),_c('div',{staticClass:\"padding-10-lr margin-15-t\"},[_c('div',{staticClass:\"flex-lr\"},[_c('ul',{staticClass:\"order-tags\"},[_c('li',{staticClass:\"handle-type\"},[_vm._v(_vm._s(item.delivery_collect_type_cn))]),_vm._v(\" \"),(0)?_c('li',[_vm._v(\"保温服务\")]):_vm._e()]),_vm._v(\" \"),(item.status == 4 && item.delivery_status != 3)?_c('div',{staticClass:\"c-danger flex\"},[(item.delivery_overtime > 0)?[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t距超时\"),_c('count-down',{staticClass:\"c-danger\",attrs:{\"endTime\":item.delivery_overtime}})]:(item.delivery_overtime_start > 0)?[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t已超时\"),_c('count-down',{staticClass:\"c-danger\",attrs:{\"startTime\":item.delivery_overtime_start}})]:_vm._e()],2):_vm._e()])]),_vm._v(\" \"),_c('ul',{staticClass:\"address padding-10-lr\",on:{\"click\":function($event){_vm.onDetail(item.id)}}},[_c('li',{staticClass:\"flex-lr margin-15-t\"},[_c('span',{staticClass:\"c-info font-15\"},[_vm._v(\"取:\")]),_vm._v(\" \"),_c('ul',{staticClass:\"address-text\"},[_c('li',{staticClass:\"font-15 font-500\"},[_vm._v(_vm._s(item.store.title))]),_vm._v(\" \"),_c('li',{staticClass:\"c-gray margin-5-t\"},[_vm._v(_vm._s(item.store.address))])])]),_vm._v(\" \"),_c('li',{staticClass:\"flex-lr margin-15-t\"},[_c('span',{staticClass:\"c-primary font-15\"},[_vm._v(\"送:\")]),_vm._v(\" \"),_c('ul',{staticClass:\"address-text\"},[_c('li',{staticClass:\"font-15 font-500 \"},[_vm._v(_vm._s(item.address))])])])]),_vm._v(\" \"),(item.note)?_c('div',{staticClass:\"note\"},[_c('div',{staticClass:\"note-title\"},[_vm._v(\"备注:\")]),_vm._v(\" \"),_c('div',{staticClass:\"note-text\"},[_vm._v(_vm._s(item.note))])]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"time padding-10-lr margin-15-t flex-lr\"},[_c('li',[_vm._v(_vm._s(item.addtime_cn)+\"下单\")]),_vm._v(\" \"),_c('li',[_vm._v(\"配送 \"+_vm._s(item.delivery_day)+\" \"+_vm._s(item.delivery_time))])]),_vm._v(\" \"),_c('ul',{staticClass:\"btn-group margin-15-t padding-10-lr flex-lr\"},[(item.delivery_status == 3)?[_c('li',{staticClass:\"btn-item bg-warning\",on:{\"click\":function($event){_vm.onChangeOrderStatus(index, 'delivery_assign')}}},[_vm._v(\"抢单\")])]:_vm._e(),_vm._v(\" \"),(item.delivery_status == 4 || item.delivery_status == 7 || item.delivery_status == 8)?[(item.transfer_delivery_status == 1)?[_c('li',{staticClass:\"btn-item bg-danger\",on:{\"click\":function($event){_vm.onChangeOrderStatus(index, 'direct_transfer_refuse')}}},[_vm._v(\"拒绝转单\")]),_vm._v(\" \"),_c('li',{staticClass:\"btn-item bg-primary\",on:{\"click\":function($event){_vm.onChangeOrderStatus(index, 'direct_transfer_agree')}}},[_vm._v(\"接受转单\")])]:[(item.delivery_status == 4)?[(item.mobile)?_c('li',{staticClass:\"btn-item bg-warning\",on:{\"click\":function($event){_vm.util.jsTel(item.mobile)}}},[_vm._v(\"联系顾客\")]):_vm._e(),_vm._v(\" \"),_c('li',{staticClass:\"btn-item bg-primary\",on:{\"click\":function($event){_vm.onChangeOrderStatus(index, 'delivery_success')}}},[_vm._v(\"确认送达\")])]:[(item.store && item.store.telephone)?_c('li',{staticClass:\"btn-item\",on:{\"click\":function($event){_vm.util.jsTel(item.store.telephone)}}},[_vm._v(\"联系商家\")]):_vm._e(),_vm._v(\" \"),_c('li',{staticClass:\"btn-item bg-primary\",on:{\"click\":function($event){_vm.onChangeOrderStatus(index, 'delivery_takegoods')}}},[_vm._v(\"确认取货\")])]]]:_vm._e()],2),_vm._v(\" \"),(item.is_pay == 1)?_c('div',[(item.pay_type != 'delivery')?_c('div',{staticClass:\"have-pay\"}):(item.pay_type == 'delivery')?_c('div',{staticClass:\"delivery-pay\"}):_vm._e()]):_vm._e()])})):_c('div',{staticClass:\"no-data\"},[_c('img',{attrs:{\"src\":\"static/img/order_no_con.png\",\"alt\":\"\"}}),_vm._v(\" \"),(_vm.filter.items.status == 3)?[(_vm.deliveryer.work_status == 1)?[(_vm.deliveryer.perm_takeout > 0)?[(!_vm.can_collect_order)?[_c('p',[_vm._v(\"当前调度模式不允许抢单,请等待管理员或系统派单\")])]:[_c('p',[_vm._v(\"暂无待抢的订单\")])]]:[_c('p',[_vm._v(\"您没有外卖配送权限，请联系管理员\")])]]:[_c('p',[_vm._v(\"您当前处于收工状态,不能抢单\")])]]:[_c('p',[_vm._v(\"暂无符合条件的订单\")])]],2)],1),_vm._v(\" \"),(_vm.failedTips.show)?_c('failed-tips',{attrs:{\"failedTips\":_vm.failedTips}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-05fce680\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/order/takeout.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-05fce680\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./takeout.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./takeout.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./takeout.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05fce680\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./takeout.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order/takeout.vue\n// module id = null\n// module chunks = ","import util from '@/config/util.js'\r\nimport router from '@/router'\r\n\r\nfunction orderStatusChangeTips(type) {\r\n\tvar types = {\r\n\t\tdelivery_assign: {\r\n\t\t\ttip: '确定抢单吗',\r\n\t\t\tsuccess_status: 4\r\n\t\t},\r\n\t\tdirect_transfer_refuse: {\r\n\t\t\ttip: '确定拒绝转单吗',\r\n\t\t\tsuccess_status: 3,\r\n\t\t\treply: 'refuse'\r\n\t\t},\r\n\t\tdirect_transfer_agree: {\r\n\t\t\ttip: '确定接受转单吗',\r\n\t\t\tsuccess_status: 2,\r\n\t\t\treply: 'agree'\r\n\t\t},\r\n\t\tdelivery_instore: {\r\n\t\t\ttip: '确定已到店吗',\r\n\t\t\tsuccess_status: 8\r\n\t\t},\r\n\t\tdelivery_takegoods: {\r\n\t\t\ttip: '确定已取货吗',\r\n\t\t\tsuccess_status: 4\r\n\t\t},\r\n\t\tdelivery_success: {\r\n\t\t\ttip: '确认已送达吗',\r\n\t\t\tsuccess_status: 5\r\n\t\t},\r\n\t\twx_notice: {\r\n\t\t\ttip: '确定通知下单人你已到达送餐地址吗',\r\n\t\t\tsuccess_status: 0\r\n\t\t}\r\n\t}\r\n\treturn types[type];\r\n};\r\n\r\nfunction changeOrderStatus(options) {\r\n\tvar type = options.type;\r\n\tif(type == 'delivery_transfer' || type == 'direct_transfer' || type == 'delivery_cancel') {\r\n\t\trouter.push(util.getUrl({path: '/pages/order/op', query: {order_id: options.order.id, type: type, order_status: options.order.delivery_status}}));\r\n\t\treturn;\r\n\t}\r\n\tvar typeInfo = orderStatusChangeTips(type);\r\n\tvar success_status = typeInfo.success_status;\r\n\tif(type == 'direct_transfer_refuse' || type == 'direct_transfer_agree') {\r\n\t\ttype = 'direct_transfer_reply';\r\n\t}\r\n\tvar url = 'delivery/order/takeout/status';\r\n\tif(type == 'wx_notice') {\r\n\t\turl = 'delivery/order/takeout/notice';\r\n\t}\r\n\tvar params = {\r\n\t\turl: url,\r\n\t\tdata: {\r\n\t\t\tid: options.order.id,\r\n\t\t\ttype: type,\r\n\t\t\treply: typeInfo.reply || ''\r\n\t\t},\r\n\t\tconfirm: typeInfo.tip,\r\n\t\tsuccess: function(message) {\r\n\t\t\tutil.$toast(message);\r\n\t\t\tif(type == 'wx_notice') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(options.from == 'detail') {\r\n\t\t\t\tif(type == 'direct_transfer_reply') {\r\n\t\t\t\t\toptions.vue.order.transfer_delivery_status = success_status;\r\n\t\t\t\t\tif(typeInfo.reply == 'agree') {\r\n\t\t\t\t\t\toptions.vue.order.deliveryer_id = options.vue.order.transfer_deliveryer_id;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.vue.order.delivery_status = success_status;\r\n\t\t\t\t}\r\n\t\t\t\toptions.vue.order = Object.assign({}, options.vue.order);\r\n\t\t\t} else {\r\n\t\t\t\tif(typeInfo.reply == 'agree') {\r\n\t\t\t\t\toptions.vue.records.data[options.index].transfer_delivery_status = success_status;\r\n\t\t\t\t} else if(typeInfo.reply == 'refuse') {\r\n\t\t\t\t\toptions.vue.records.data.splice(options.index, 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar types = ['delivery_assign', 'delivery_takegoods', 'delivery_success'];\r\n\t\t\t\t\tif(types.indexOf(type) != -1) {\r\n\t\t\t\t\t\toptions.vue.records.data.splice(options.index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tutil.jspost(params);\r\n};\r\n\r\nexport {\r\n\torderStatusChangeTips,\r\n\tchangeOrderStatus,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order/controller/order.js"],"sourceRoot":""}