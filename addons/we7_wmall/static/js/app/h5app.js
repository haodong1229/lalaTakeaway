define(["tiny","//static.ydbimg.com/API/YdbOnline.js"],function(a){var b={};return b.init=function(a){b.shareinfo=a.share?a.share:null,b.relation=a.relation?a.relation:null,b.backurl=a.backurl,b.payinfo=a.payinfo,b.initYDB(),b.set(),b.sns(),b.initOther()},b.initYDB=function(){window.YDB=b.YDB=new YDBOBJ},b.initOther=function(){$("#btn-share").unbind("click").click(function(){b.share()}),b.relation&&b.YDB.SetUserRelationForPush(b.relation)},b.set=function(){},b.share=function(){if(!b.share)return void $.toast("分享参数错误");b.YDB.Share(b.share.title,b.share.desc,b.share.imgUrl,b.share.link)},b.sns=function(){$(".btn-sns").click(function(){var c=$(this).data("sns");"wx"==c?($.toast("正在呼起微信"),b.YDB.WXLogin(0,a.getUrl("wmall/auth/account/sns",{sns:"wx"},!0))):"qq"==c&&($.toast("正在呼起手机QQ"),b.YDB.QQLogin(a.getUrl("wmall/auth/account/sns",{sns:"qq"},!0)))})},b.pay=function(a,c,d,e){var c=c||b.payinfo.ordersn,d=d||b.payinfo.money;return b.payinfo&&b.payinfo.mallName?c?d<0?void $.toast("支付金额有误"):("wechat"==a&&($.toast("正在呼起微信"),b.YDB.SetWxpayInfo(b.payinfo.mallName,b.payinfo.desc,d,c,b.payinfo.attach)),"alipay"==a&&($.toast("正在呼起支付宝"),b.YDB.SetAlipayInfo(b.payinfo.mallName,b.payinfo.attach,d,c)),$(".btn-pay").removeAttr("submit"),$(".pay-btn").removeAttr("stop"),void(e&&e())):void $.toast("订单号有误"):void $.toast("支付信息不完善")},window.h5app=b,b});