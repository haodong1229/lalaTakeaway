<?php/** * 模块示例模块定义 * * @author xluwei * @url */defined('IN_IA') or exit('Access Denied');class Yb_pingcheModule extends WeModule{    private $wxapp;    public function welcomeDisplay()    {        global  $_W;        $tt = json_encode($_W['account']);        $this->wxapp = json_decode($tt,true);        //设置登录状态获取uniacid        $this->setLoginStatus();        //跳转后台        $this->passport();    }    public function run()    {        //校验后台入口文件        // $this->checkModuleFile();        //设置登录状态获取uniacid        $this->setLoginStatus();        //跳转后台        $this->passport();    }    private function checkModuleFile()    {        if(!file_exists(__DIR__.'/index.php')){            die('缺少入口文件');        }        return true;    }    private function setLoginStatus()    {        if (session_status() != PHP_SESSION_ACTIVE) {            session_start();        }        global  $_W;        $_SESSION['we8'] = $this->wxapp;        $_SESSION['ims_version'] = IMS_VERSION;        $_SESSION['copyright'] = $_W['setting']['copyright'];    }    private function passport()    {        global  $_W;        $url = $_W['siteroot'] . 'addons/' . $_W['current_module']['name'] . '/admin.php/WeLogin/index';        header('Location:'.$url);        exit();    }}